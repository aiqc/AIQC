<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta property="og:title" content="ORM" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://docs.aiqc.io/notebooks/api_low_level.html" />
  <meta property="og:site_name" content="AIQC" />
  <meta property="og:description" content="316ffc45adea45e8bed2a050f099111e Object-Relational Model: The Low-Level API is an object-relational model for machine learning. Each class in the ORM maps to a table in a SQLite database that serve..." />
  <meta property="og:image" content="https://raw.githubusercontent.com/aiqc/aiqc/main/docs/_static/images/web/meta_image_tall_rect.png" />
  <meta property="og:image:alt" content="Artificial Intelligence Quality Control" />
  <meta property="twitter:image" content="https://raw.githubusercontent.com/aiqc/aiqc/main/docs/_static/images/web/meta_image_tall_rect.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ORM &mdash; AIQC</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Datasets" href="datasets.html" />
    <link rel="prev" title="API" href="api_high_level.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/aiqc_logo_square_blues_transparent.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/gallery.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Install</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#AIQC-Python-Package">AIQC Python Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#Environment-Setup">Environment Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation.html#Python-Version">Python Version</a><ul>
<li class="toctree-l4"><a class="reference internal" href="installation.html#Pickle-Disclaimer">Pickle Disclaimer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#Operating-System">Operating System</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#Optional---JupyterLab-IDE">Optional - JupyterLab IDE</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#Optional---Swap-Space-for-Failover-Memory">Optional - Swap Space for Failover Memory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#Location-of-AIQC-Files">Location of AIQC Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation.html#Location-Based-on-OS">Location Based on OS</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#Database">Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#Config">Config</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#Optional---Deleting-the-Database">Optional - Deleting the Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation.html#a)-One-Liner">a) One-Liner</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#b)-Or-Line-by-Line">b) Or Line-by-Line</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#Troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation.html#Reloading-the-Package">Reloading the Package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dashboard.html">UI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dashboard.html#Experiment-Tracker">Experiment Tracker</a></li>
<li class="toctree-l2"><a class="reference internal" href="dashboard.html#Compare-Models-Head-to-Head">Compare Models Head-to-Head</a></li>
<li class="toctree-l2"><a class="reference internal" href="dashboard.html#What-If-Analysis">What-If Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="dashboard.html#Run-the-App">Run the App</a></li>
<li class="toctree-l2"><a class="reference internal" href="dashboard.html#What-about-JupyterDash?">What about JupyterDash?</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api_high_level.html">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api_high_level.html#Declarative">Declarative</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_high_level.html#1.-Pipeline">1. <code class="docutils literal notranslate"><span class="pre">Pipeline</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_high_level.html#1a.-Input">1a. <code class="docutils literal notranslate"><span class="pre">Input</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_high_level.html#1ai.-Input.Interpolater">1ai. <code class="docutils literal notranslate"><span class="pre">Input.Interpolater</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_high_level.html#1aii.-Input.Window">1aii. <code class="docutils literal notranslate"><span class="pre">Input.Window</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_high_level.html#1aiii.-Input.Encoder">1aiii. <code class="docutils literal notranslate"><span class="pre">Input.Encoder</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_high_level.html#1b.-Target">1b. <code class="docutils literal notranslate"><span class="pre">Target</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="api_high_level.html#1bi.-Target.Interpolater">1bi. <code class="docutils literal notranslate"><span class="pre">Target.Interpolater</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api_high_level.html#1bii.-Target.Encoder">1bii. <code class="docutils literal notranslate"><span class="pre">Target.Encoder</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_high_level.html#1c.-Stratifier">1c. <code class="docutils literal notranslate"><span class="pre">Stratifier</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api_high_level.html#2.-Experiment">2. <code class="docutils literal notranslate"><span class="pre">Experiment</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_high_level.html#2a.-Architecture">2a. <code class="docutils literal notranslate"><span class="pre">Architecture</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api_high_level.html#2b.-Trainer">2b. <code class="docutils literal notranslate"><span class="pre">Trainer</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api_high_level.html#3.-Inference">3. <code class="docutils literal notranslate"><span class="pre">Inference</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ORM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Object-Relational-Model">Object-Relational Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#0.-BaseModel">0. BaseModel</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#0a.-Methods">0a. Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#0b.-Attributes">0b. Attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#1.-Dataset">1. Dataset</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#1a.-Methods">1a. Methods</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#1ai.-Registration">1ai. Registration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#1aii.-Fetch">1aii. Fetch</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#1b.-Attributes">1b. Attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#2.-Feature">2. Feature</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#2a.-Methods">2a. Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#2b.-Attributes">2b. Attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#3.-Label">3. Label</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#3a.-Methods">3a. Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#3b.-Attributes">3b. Attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#4.-Interpolate">4. Interpolate</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#4a.-LabelInterpolater">4a. <code class="docutils literal notranslate"><span class="pre">LabelInterpolater</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#4ai.-Methods">4ai. Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#4aii.-Attributes">4aii. Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#4b.-FeatureInterpolater">4b. <code class="docutils literal notranslate"><span class="pre">FeatureInterpolater</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#4bi.-Methods">4bi. Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#4bii.-Attributes">4bii. Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#5.-Encode">5. Encode</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#5a.-LabelCoder">5a. <code class="docutils literal notranslate"><span class="pre">LabelCoder</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#5ai.-Methods">5ai. Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#5aii.-Attributes">5aii. Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#5b.-FeatureCoder">5b. <code class="docutils literal notranslate"><span class="pre">FeatureCoder</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#5bi.-Methods">5bi. Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#5bii.-Attributes">5bii. Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#6.-Shape">6. Shape</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#6a.-Methods">6a. Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#6b.-Attributes">6b. Attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#7.-Window">7. Window</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#7a.-Methods">7a. Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#7b.-Attributes">7b. Attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#8.-Splitset">8. Splitset</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#8a.-Methods">8a. Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#8b.-Attributes">8b. Attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#9.-Algorithm">9. Algorithm</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#9a.-Methods">9a. Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#9b.-Attributes">9b. Attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#10.-Hyperparameters">10. Hyperparameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#10a.-Methods">10a. Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#10b.-Attributes">10b. Attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#11.-Queue">11. Queue</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#11a.-Methods">11a. Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#11b.-Attributes">11b. Attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#12.-Job">12. Job</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#12a.-Methods">12a. Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#12b.-Attributes">12b. Attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#13.-Predictor">13. Predictor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#13a.-Methods">13a. Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#13b.-Attributes">13b. Attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#14.-Prediction">14. Prediction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#14a.-Methods">14a. Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#14b.-Attributes">14b. Attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Evaluation">Evaluation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="datasets.html">Datasets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="datasets.html#Overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="datasets.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="datasets.html#Prepackaged-Local-Data">Prepackaged Local Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="datasets.html#Remote-Data">Remote Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="datasets.html#Alternative-Sources">Alternative Sources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="evaluation.html">Evaluation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html#Overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html#Prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html#Classification">Classification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="evaluation.html#Queue-Visualization">Queue Visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="evaluation.html#Queue-Metrics">Queue Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="evaluation.html#Job-Visualization">Job Visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="evaluation.html#Job-Metrics">Job Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="evaluation.html#Prediction-Visualization">Prediction Visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="evaluation.html#Prediction-Metrics">Prediction Metrics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html#Regression">Regression</a><ul>
<li class="toctree-l3"><a class="reference internal" href="evaluation.html#id1">Queue Visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="evaluation.html#id2">Queue Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="evaluation.html#id3">Job Visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="evaluation.html#id4">Job Metrics</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/explainer.html">Deep Learning 101</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/community.html">Open Source</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pages/community.html#purpose">Purpose</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pages/community.html#how-can-i-get-involved">How can I get involved?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pages/community.html#how-can-i-contribute">How can I contribute?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pages/community.html#setting-up-dev-environment">Setting up dev environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pages/community.html#programming-style">Programming style</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pages/community.html#code-of-conduct">Code of conduct</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pages/community.html#guild-bylaws-aka-governance">Guild bylaws (aka governance)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pages/community.html#aiqc-inc-is-open-core">AIQC, Inc. is open core</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pages/community.html#id1">Open source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../pages/community.html#choosing-a-license">Choosing a license</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pages/compare.html">Competition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/mission.html">Mission</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pages/mission.html#why-does-aiqc-exist">Why Does AIQC Exist?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pages/mission.html#accelerate-science-by-making-deep-learning-accessible">1. Accelerate science by making deep learning accessible.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pages/mission.html#bring-the-scientific-method-to-data-science">2. Bring the scientific method to data science.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pages/mission.html#break-down-walled-gardens-to-keep-science-open">3. Break down walled gardens to keep science open.</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AIQC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>ORM</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/notebooks/api_low_level.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ORM">
<h1>ORM<a class="headerlink" href="#ORM" title="Permalink to this headline"></a></h1>
<p><img alt="316ffc45adea45e8bed2a050f099111e" class="banner-photo" src="../_images/sql.png" /></p>
<section id="Object-Relational-Model">
<h2>Object-Relational Model<a class="headerlink" href="#Object-Relational-Model" title="Permalink to this headline"></a></h2>
<p>The Low-Level API is an <em>object-relational model</em> for machine learning. Each class in the <a class="reference external" href="http://docs.peewee-orm.com/en/latest/peewee/models.html">ORM</a> maps to a table in a SQLite database that serves as a machine learning <em>metastore</em>.</p>
<p>The real power lies in the relationships between these objects (e.g. <code class="docutils literal notranslate"><span class="pre">Label</span></code>→<code class="docutils literal notranslate"><span class="pre">Splitset</span></code>←<code class="docutils literal notranslate"><span class="pre">Feature</span></code> and <code class="docutils literal notranslate"><span class="pre">Queue</span></code>→<code class="docutils literal notranslate"><span class="pre">Job</span></code>→<code class="docutils literal notranslate"><span class="pre">Predictor</span></code>→<code class="docutils literal notranslate"><span class="pre">Prediction</span></code>), which enable us to construct rule-base protocols for various types of data and analysis.</p>
<p>Goobye, <em>X_train, y_test</em>. Hello, object-oriented machine learning.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiqc.orm</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p><strong>Automatic ‘id’ method argument</strong></p>
<p>If an ORM-based classes is instantiated, then any method called by the resulting object will automatically pass in the object’s <code class="docutils literal notranslate"><span class="pre">self.id</span></code> in as its first positional argument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">queue</span> <span class="o">=</span> <span class="n">Queue</span><span class="o">.</span><span class="n">get_by_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
<span class="n">queue</span><span class="o">.</span><span class="n">run_jobs</span><span class="p">()</span>
</pre></div>
</div>
<p>However, if the class has not been instantiated, then the <code class="docutils literal notranslate"><span class="pre">id</span></code> is required:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Queue</span><span class="o">.</span><span class="n">run_jobs</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
</pre></div>
</div>
<blockquote>
<div><p>Although I did not design this pattern, if you think about it, it makes sense. ORMs allow you to fluidly traverse relational objects. If you had to check the <code class="docutils literal notranslate"><span class="pre">object.id</span></code> of everything you returned before interacting with it, then that would ruin the user-friendly experience.</p>
</div></blockquote>
<hr class="docutils" />
</section>
<section id="0.-BaseModel">
<h2>0. BaseModel<a class="headerlink" href="#0.-BaseModel" title="Permalink to this headline"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">BaseModel</span></code> class applies to all tables in the ORM. It’s metadata in the truest sense of the word.</p>
<p>Localized timestamps are handled by <a class="reference external" href="https://github.com/aiqc/AIQC/blob/4743f8a36ca84dcebbf1b757c1969720bc15450b/aiqc/utils/config.py">utils.config.timezone_now()</a>. They are made human-readable via <code class="docutils literal notranslate"><span class="pre">strftime('%Y%b%d_%H:%M:%S')</span></code> → “2022Jun23_07:13:14”</p>
<hr class="docutils" />
<section id="0a.-Methods">
<h3>0a. Methods<a class="headerlink" href="#0a.-Methods" title="Permalink to this headline"></a></h3>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">created_at()</span></code></p>
<p>Returns the creation timestamp in human-readable format.</p>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">updated_at()</span></code></p>
<p>Returns timestamp of the most recent update in human-readable format.</p>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">flip_star()</span></code></p>
<p>A way to toggle (favorite/ unfavorite) the <code class="docutils literal notranslate"><span class="pre">is_starred</span></code> attribute in order to make entries easy to find.</p>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">set_info()</span></code></p>
<p>Add descriptive information about an entry so that you remember why you created it</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">set_info</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 24%" />
<col style="width: 6%" />
<col style="width: 11%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>name</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>Short name to remember this entry by</p></td>
</tr>
<tr class="row-odd"><td><p><strong>description</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>What is unique about this entry?</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
<section id="0b.-Attributes">
<h3>0b. Attributes<a class="headerlink" href="#0b.-Attributes" title="Permalink to this headline"></a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>AutoField</p></td>
<td><p>Auto-incrementing integer (1-based, not zero-based) PrimaryKey</p></td>
</tr>
<tr class="row-odd"><td><p><strong>time_created</strong></p></td>
<td><p>DateTimeField</p></td>
<td><p>Records a timestamp when the record is created</p></td>
</tr>
<tr class="row-even"><td><p><strong>time_updated</strong></p></td>
<td><p>DateTimeField</p></td>
<td><p>Records a timestamp when the record is created. Overwritten every time the record is updated.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>is_starred</strong></p></td>
<td><p>BooleanField</p></td>
<td><p>Used to indicated that the entry is a favorite</p></td>
</tr>
<tr class="row-even"><td><p><strong>name</strong></p></td>
<td><p>CharField</p></td>
<td><p>Short name to remember this entry by</p></td>
</tr>
<tr class="row-odd"><td><p><strong>description</strong></p></td>
<td><p>CharField</p></td>
<td><p>What is unique about this entry?</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
</section>
<section id="1.-Dataset">
<h2>1. Dataset<a class="headerlink" href="#1.-Dataset" title="Permalink to this headline"></a></h2>
<p><img alt="Datasets" src="../_images/dimensions.png" /></p>
<p>The <code class="docutils literal notranslate"><span class="pre">Dataset</span></code> class provides the following subclasses for working with different types of data:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Dimensionality</p></th>
<th class="head"><p>Supported Formats</p></th>
<th class="head"><p>Format (if ingested)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Tabular</strong></p></td>
<td><p>2D</p></td>
<td><p>Files (Parquet, CSV, TSV) / Pandas DataFrame (in-memory)</p></td>
<td><p>Parquet</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Sequence</strong></p></td>
<td><p>3D</p></td>
<td><p>NumPy (in-memory ndarray, npy file)</p></td>
<td><p>npy</p></td>
</tr>
<tr class="row-even"><td><p><strong>Image</strong></p></td>
<td><p>4D</p></td>
<td><p>NumPy (in-memory ndarray, npy file) / Pillow-supported formats</p></td>
<td><p>npy</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>The names are merely suggestive, as the primary purpose of these subclasses is to provide a way to register data of known dimensionality. For example, a practitioner could ingest many uni-channel/ grayscale images as a 3D Sequence Dataset instead of a multi-channel 4D Image Dataset.</p>
</div></blockquote>
<blockquote>
<div><p><em>Why not 2D NumPy?</em> The <code class="docutils literal notranslate"><span class="pre">Dataset.Tabular</span></code> class is intended for strict, column-specific dtypes and Parquet persistence upon ingestion. In practice, this conflicted too often with NumPy’s array-wide dtyping. We use the best tools for the job (df/pq for 2D) and (array/npy for ND).</p>
</div></blockquote>
<hr class="docutils" />
<section id="1a.-Methods">
<h3>1a. Methods<a class="headerlink" href="#1a.-Methods" title="Permalink to this headline"></a></h3>
<section id="1ai.-Registration">
<h4>1ai. Registration<a class="headerlink" href="#1ai.-Registration" title="Permalink to this headline"></a></h4>
<p><em>Most of the Dataset registration methods share these arguments/ concepts:</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>ingest</strong></p></td>
<td><p>Determines if raw data is either stored directly inside the metastore or remains on disk to be accessed via path/url. <em>In-memory</em> data like DataFrames and ndarrays must be ingested. Whereas <em>file-based</em> data like Parquet, NPY, Image folders/urls
may remain remote. Regardless of whether or not the raw data is ingested, metadata is always derived from it by parsing: 2D via DataFrame and N-D via ndarray.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>rename_columns</strong></p></td>
<td><p>Useful for assigning column names to arrays or delimited files that would otherwise be unnamed. <code class="docutils literal notranslate"><span class="pre">len(rename_columns)</span></code> must match the number of columns in the raw data. Normally, an int-based range is assigned to unnamed columns. In this case,
AIQC converts each column name to a string e.g. ‘1’ during the registration process.</p></td>
</tr>
<tr class="row-even"><td><p><strong>retype</strong></p></td>
<td><p>Change the dtype of data using <a class="reference external" href="https://numpy.org/doc/stable/user/basics.types.html">np.types</a>. All Dataset subclasses support mass typing via <code class="docutils literal notranslate"><span class="pre">np.type</span></code>/ <code class="docutils literal notranslate"><span class="pre">str(np.type)</span></code>. Only the Tabular subclass supports inidividual column retyping via
<code class="docutils literal notranslate"><span class="pre">dict(column=str(np.type))</span></code>. If <code class="docutils literal notranslate"><span class="pre">rename_columns</span></code> is used in conjuction with <code class="docutils literal notranslate"><span class="pre">retype=dict()</span></code>, then each <code class="docutils literal notranslate"><span class="pre">dict['column']</span></code> key must match its counterpart in rename_columns.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>description</strong></p></td>
<td><p>What information does this dataset contain? What is unique about this dataset/ version – did you edit the raw data, add rows, or change column names/ dtypes?</p></td>
</tr>
<tr class="row-even"><td><p><strong>name</strong></p></td>
<td><p>Triggers dataset <em>versioning</em>. Datasets that share a name will be assigned an auto-incrementing <code class="docutils literal notranslate"><span class="pre">version:int</span></code> number provided that they are not duplicates of each other based on a <code class="docutils literal notranslate"><span class="pre">sha256_hexdigest:str</span></code> hash. If you try to create an exact
duplicate, it will warn you and <code class="docutils literal notranslate"><span class="pre">return</span></code> the matching duplicate instead of creating a new entity. This behavior makes it easy to rerun pipelines where Datasets are created inline.</p></td>
</tr>
</tbody>
</table>
<p><em>Ingestion provides the following benefits, especially for entry-level users:</em></p>
<ul class="simple">
<li><p>Persist in-memory datasets (Pandas DataFrames, NumPy ndarrays).</p></li>
<li><p>Keeps data coupled with the experiment in the portable SQLite file.</p></li>
<li><p>Provides a more immutable and out-of-the-way storage location in comparison to a laptop file system.</p></li>
<li><p>Encourages preserving tabular dtypes with the ecosystem-friendly Parquet format.</p></li>
</ul>
<p><em>Why would I avoid ingestion?</em></p>
<ul class="simple">
<li><p>Happy with where the original data lives: e.g. S3 bucket.</p></li>
<li><p>Don’t want to duplicate the data.</p></li>
</ul>
<blockquote>
<div><p><em>sha256?</em> – It’s the one-way hash algorithm that GitHub aspires to upgrade to. AIQC runs it on compressed data because it’s easier and probably less-error prone than intercepting the bytes of the <em>fastparquet</em> intermediary tables before appending the Parquet magic bytes.</p>
</div></blockquote>
<blockquote>
<div><p><em>Is SQLite a legitimate datastore?</em> – In many cases, SQLite queries are faster than accessing data via a filesystem. It’s a stable, 22 year-old technology that serves as the default database for iOS e.g. Apple Photos. AIQC uses it store raw data in byte format as a BlobField. I’ve stored tens-of-thousands of files in it over several years and never experienced corruption. Keep in mind that AWS S3 is blob store, and the Microsoft equivalent service is literally called Azure <em>Blob</em> Storage.
The max size of a BlobField is 2GB, so ~20GB after compression. Either way, the goal of machine learning isn’t to record the entire population within the weights of a neural network, it’s to find subsets that are representative of the broader population.</p>
</div></blockquote>
<hr class="docutils" />
<section id="1ai1.-Dataset.Tabular">
<h5>1ai1. <code class="docutils literal notranslate"><span class="pre">Dataset.Tabular</span></code><a class="headerlink" href="#1ai1.-Dataset.Tabular" title="Permalink to this headline"></a></h5>
<p>Here are some of the ways practitioners can use this 2D structure:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Multiple subjects (1 row per sample) * Multi-variate 1D (1 col per attribute)</p></td>
</tr>
<tr class="row-even"><td><p>Single subject (1 row per timestamp) * Multi-variate 1D (1 col per attribute)</p></td>
</tr>
<tr class="row-odd"><td><p>Multiple subjects (1 row per timestamp) * Uni-variate 0D (1 col per sample)</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>Tabular datasets may contain both features and labels</p>
</div></blockquote>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Dataset.Tabular.from_df()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">Tabular</span><span class="o">.</span><span class="n">from_df</span><span class="p">(</span>
    <span class="n">dataframe</span>
    <span class="p">,</span> <span class="n">rename_columns</span>
    <span class="p">,</span> <span class="n">retype</span>
    <span class="p">,</span> <span class="n">description</span>
    <span class="p">,</span> <span class="n">name</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>df</strong></p></td>
<td><p>DataFrame</p></td>
<td><p>Required</p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas-dataframe">pd.DataFrame</a> with int-based
single index. DataFrames are always ingested.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>rename_columns</strong></p></td>
<td><p>list[str]</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-even"><td><p><strong>retype</strong></p></td>
<td><p>np.type / dict(column:np.type)</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-odd"><td><p><strong>description</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-even"><td><p><strong>name</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Dataset.Tabular.from_path()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Dataset</span><span class="o">.</span><span class="n">Tabular</span><span class="o">.</span><span class="n">from_path</span><span class="p">(</span>
    <span class="n">file_path</span>
    <span class="p">,</span> <span class="n">ingest</span>
    <span class="p">,</span> <span class="n">rename_columns</span>
    <span class="p">,</span> <span class="n">retype</span>
    <span class="p">,</span> <span class="n">header</span>
    <span class="p">,</span> <span class="n">description</span>
    <span class="p">,</span> <span class="n">name</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>file_path</strong></p></td>
<td><p>str</p></td>
<td><p>Required</p></td>
<td><p>Parsed based on how the file name ends (.parquet, .tsv, .csv)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ingest</strong></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>See Registration. Defaults to True because I don’t want to rely on CSV files as a source of truth
for dtypes, and compression works great in Parquet.</p></td>
</tr>
<tr class="row-even"><td><p><strong>rename_columns</strong></p></td>
<td><p>list[str]</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-odd"><td><p><strong>retype</strong></p></td>
<td><p>np.type / dict(column:np.type)</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-even"><td><p><strong>header</strong></p></td>
<td><p>object</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-odd"><td><p><strong>description</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-even"><td><p><strong>name</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
<section id="1ai2.-Dataset.Sequence">
<h5>1ai2. <code class="docutils literal notranslate"><span class="pre">Dataset.Sequence</span></code><a class="headerlink" href="#1ai2.-Dataset.Sequence" title="Permalink to this headline"></a></h5>
<p>Here are some of the ways practitioners can use this 3D structure:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Single subject (1 patient) * Multiple 2D sequences</p></td>
</tr>
<tr class="row-even"><td><p>Multiple subjects * Single 2D sequence</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>Sequence datasets are somewhat multi-modal in that, in order to perform supervised learning on them, they must eventually be paired with a <code class="docutils literal notranslate"><span class="pre">Dataset.Tabular</span></code> that acts as its <code class="docutils literal notranslate"><span class="pre">Label</span></code>.</p>
</div></blockquote>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Dataset.Sequence.from_numpy()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Dataset</span><span class="o">.</span><span class="n">Sequence</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span>
    <span class="n">arr3D_or_npyPath</span>
    <span class="p">,</span> <span class="n">ingest</span>
    <span class="p">,</span> <span class="n">rename_columns</span>
    <span class="p">,</span> <span class="n">retype</span>
    <span class="p">,</span> <span class="n">description</span>
    <span class="p">,</span> <span class="n">name</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>arr3D_or_npyPath</strong></p></td>
<td><p>object / str</p></td>
<td><p>Required</p></td>
<td><p>3D array in the form of either an <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html">ndarray</a> or
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.save.html">npy</a> file path</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ingest</strong></p></td>
<td><p>bool</p></td>
<td><p>None</p></td>
<td><p>See Registration. If left blank, ndarrays will be ingested and npy will not. Errors if ndarray and
False.</p></td>
</tr>
<tr class="row-even"><td><p><strong>rename_columns</strong></p></td>
<td><p>list[str]</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-odd"><td><p><strong>retype</strong></p></td>
<td><p>np.type / dict(column:np.type)</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-even"><td><p><strong>description</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-odd"><td><p><strong>name</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
<section id="1ai3.-Dataset.Image">
<h5>1ai3. <code class="docutils literal notranslate"><span class="pre">Dataset.Image</span></code><a class="headerlink" href="#1ai3.-Dataset.Image" title="Permalink to this headline"></a></h5>
<p>Here are some of the ways you can practitioners this 4D structure:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Single subject (1 patient) * Multiple 3D images</p></td>
</tr>
<tr class="row-even"><td><p>Multiple subjects * Single 3D image</p></td>
</tr>
</tbody>
</table>
<p>Users can ingest 4D data using either: - <a class="reference external" href="https://pillow.readthedocs.io/en/stable/handbook/image-file-formats.html">The Pillow library, which supports various formats</a> - Or NumPy arrays as a simple alternative</p>
<blockquote>
<div><p>Image datasets are somewhat multi-modal in that, in order to perform supervised learning on them, they must eventually be paired with a <code class="docutils literal notranslate"><span class="pre">Dataset.Tabular</span></code> that acts as its <code class="docutils literal notranslate"><span class="pre">Label</span></code>.</p>
</div></blockquote>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Dataset.Image.from_numpy()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Dataset</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span>
    <span class="n">arr4D_or_npyPath</span>
    <span class="p">,</span> <span class="n">ingest</span>
    <span class="p">,</span> <span class="n">rename_columns</span>
    <span class="p">,</span> <span class="n">retype</span>
    <span class="p">,</span> <span class="n">description</span>
    <span class="p">,</span> <span class="n">name</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>arr4D_or_npyPath</strong></p></td>
<td><p>object / str</p></td>
<td><p>Required</p></td>
<td><p>4D array in the form of either an <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html">ndarray</a> or
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.save.html">npy</a> file path</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ingest</strong></p></td>
<td><p>bool</p></td>
<td><p>None</p></td>
<td><p>See Registration. If left blank, ndarrays will be ingested and npy will not. Errors if input is
ndarray and <code class="docutils literal notranslate"><span class="pre">ingest==False</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>rename_columns</strong></p></td>
<td><p>list[str]</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-odd"><td><p><strong>retype</strong></p></td>
<td><p>np.type / dict(column:np.type)</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-even"><td><p><strong>description</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-odd"><td><p><strong>name</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Dataset.Image.from_folder()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Dataset</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">from_folder</span><span class="p">(</span>
    <span class="n">folder_path</span>
    <span class="p">,</span> <span class="n">ingest</span>
    <span class="p">,</span> <span class="n">rename_columns</span>
    <span class="p">,</span> <span class="n">retype</span>
    <span class="p">,</span> <span class="n">description</span>
    <span class="p">,</span> <span class="n">name</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>folder_path</strong></p></td>
<td><p>str</p></td>
<td><p>Required</p></td>
<td><p>Folder of images to be ingested via Pillow. All images must be cropped to the same dimensions ahead of time.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ingest</strong></p></td>
<td><p>bool</p></td>
<td><p>False</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-even"><td><p><strong>rename_columns</strong></p></td>
<td><p>list[str]</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-odd"><td><p><strong>retype</strong></p></td>
<td><p>np.type / dict(column:np.type)</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-even"><td><p><strong>description</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-odd"><td><p><strong>name</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Dataset.Image.from_urls()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Dataset</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">from_urls</span><span class="p">(</span>
    <span class="n">urls</span>
    <span class="p">,</span> <span class="n">source_path</span>
    <span class="p">,</span> <span class="n">ingest</span>
    <span class="p">,</span> <span class="n">rename_columns</span>
    <span class="p">,</span> <span class="n">retype</span>
    <span class="p">,</span> <span class="n">description</span>
    <span class="p">,</span> <span class="n">name</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>urls</strong></p></td>
<td><p>list(str)</p></td>
<td><p>Required</p></td>
<td><p>URLs that point to an image to be ingested via Pillow. All images must be cropped to the same dimensions ahead of time.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>source_path</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>Optionally record a shared directory, bucket, or FTP site where images are stored. The backend won’t use this information
for anything.</p></td>
</tr>
<tr class="row-even"><td><p><strong>ingest</strong></p></td>
<td><p>bool</p></td>
<td><p>False</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-odd"><td><p><strong>rename_columns</strong></p></td>
<td><p>list[str]</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-even"><td><p><strong>retype</strong></p></td>
<td><p>np.type / dict(column:np.type)</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-odd"><td><p><strong>description</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
<tr class="row-even"><td><p><strong>name</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>See Registration</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
</section>
<section id="1aii.-Fetch">
<h4>1aii. Fetch<a class="headerlink" href="#1aii.-Fetch" title="Permalink to this headline"></a></h4>
<p>The following methods are exposed to end-users in case they want to inspect the data that they have ingested.</p>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Dataset.to_arr()</span></code></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The identifier of the Dataset of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>columns</strong></p></td>
<td><p>list(str)</p></td>
<td><p>None</p></td>
<td><p>If left blank, includes all columns</p></td>
</tr>
<tr class="row-even"><td><p><strong>samples</strong></p></td>
<td><p>list(int)</p></td>
<td><p>None</p></td>
<td><p>If left blank, includes all samples</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 35%" />
<col style="width: 65%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Subclass</p></th>
<th class="head"><p>Returns</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Tabular</p></td>
<td><p>ndarray.ndim==2</p></td>
</tr>
<tr class="row-odd"><td><p>Sequence</p></td>
<td><p>ndarray.ndim==3</p></td>
</tr>
<tr class="row-even"><td><p>Image</p></td>
<td><p>ndarray.ndim==4</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Dataset.to_df()</span></code></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The identifier of the Dataset of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>columns</strong></p></td>
<td><p>list(str)</p></td>
<td><p>None</p></td>
<td><p>If left blank, includes all columns</p></td>
</tr>
<tr class="row-even"><td><p><strong>samples</strong></p></td>
<td><p>list(int)</p></td>
<td><p>None</p></td>
<td><p>If left blank, includes all samples</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Subclass</p></th>
<th class="head"><p>Returns</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Tabular</p></td>
<td><p>DataFrame</p></td>
</tr>
<tr class="row-odd"><td><p>Sequence</p></td>
<td><p>list(DataFrame)</p></td>
</tr>
<tr class="row-even"><td><p>Image</p></td>
<td><p>list(list(DataFrame))</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Dataset.to_pillow()</span></code></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The identifier of the Dataset of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>samples</strong></p></td>
<td><p>list(int)</p></td>
<td><p>None</p></td>
<td><p>If left blank, includes all samples</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 35%" />
<col style="width: 65%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Subclass</p></th>
<th class="head"><p>Returns</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Image</p></td>
<td><p>list(PIL.Image)</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Dataset.get_dtypes()</span></code></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The identifier of the Dataset of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>columns</strong></p></td>
<td><p>list(str)</p></td>
<td><p>None</p></td>
<td><p>If left blank, includes all columns</p></td>
</tr>
</tbody>
</table>
<p>Regardless of how the initial <code class="docutils literal notranslate"><span class="pre">Dataset.dtype</span></code> was formatted [e.g. single np.type / str(np.type) / dict(column=np.type)], this function intentionally returns then dtype of each column within a <code class="docutils literal notranslate"><span class="pre">dict(column=str(np.type)</span></code> format.</p>
<hr class="docutils" />
</section>
</section>
<section id="1b.-Attributes">
<h3>1b. Attributes<a class="headerlink" href="#1b.-Attributes" title="Permalink to this headline"></a></h3>
<p>These are the fields in the Dataset table</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>typ</strong></p></td>
<td><p>CharField</p></td>
<td><p>The Dataset type: Tabular, Sequence, Image</p></td>
</tr>
<tr class="row-odd"><td><p><strong>source_format</strong></p></td>
<td><p>CharField</p></td>
<td><p>The file format (Parquet, CSV, TSV) or in-memory class (DataFrame, ndarray)</p></td>
</tr>
<tr class="row-even"><td><p><strong>source_path</strong></p></td>
<td><p>CharField</p></td>
<td><p>The path of the original file/ folder</p></td>
</tr>
<tr class="row-odd"><td><p><strong>urls</strong></p></td>
<td><p>JSONField</p></td>
<td><p>A list of URLs as an alternative to file paths/ folders</p></td>
</tr>
<tr class="row-even"><td><p><strong>columns</strong></p></td>
<td><p>JSONField</p></td>
<td><p>List of str-based names for each column</p></td>
</tr>
<tr class="row-odd"><td><p><strong>dtypes</strong></p></td>
<td><p>JSONField</p></td>
<td><p>The type of each column. Tabular dtype is saved in <code class="docutils literal notranslate"><span class="pre">dict(column=str(np.type))</span></code> format. Where Sequence and Image dtype is saved in a singular <code class="docutils literal notranslate"><span class="pre">str(np.type)</span></code></p></td>
</tr>
<tr class="row-even"><td><p><strong>shape</strong></p></td>
<td><p>JSONField</p></td>
<td><p>Human-readable dictionary about the dimensions of the data e.g. <code class="docutils literal notranslate"><span class="pre">samples:10,</span> <span class="pre">columns:5</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>sha256_hexdigest</strong></p></td>
<td><p>CharField</p></td>
<td><p>A hash of the data to determine its uniqueness for versioning.</p></td>
</tr>
<tr class="row-even"><td><p><strong>memory_MB</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>Size of the dataset in megabytes when loaded into memory</p></td>
</tr>
<tr class="row-odd"><td><p><strong>contains_nan</strong></p></td>
<td><p>BooleanField</p></td>
<td><p>Whether or not the dataset contains any blank cells</p></td>
</tr>
<tr class="row-even"><td><p><strong>header</strong></p></td>
<td><p>PickleField</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv(header)</span></code> for TSV/CSV files.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>is_ingested</strong></p></td>
<td><p>BooleanField</p></td>
<td><p>Quick flag to see if the data was ingested. Exists to prevent querying the <code class="docutils literal notranslate"><span class="pre">blob</span></code> field unnecessarily.</p></td>
</tr>
<tr class="row-even"><td><p><strong>blob</strong></p></td>
<td><p>BlobField</p></td>
<td><p>The raw bytes of the data obtained via <code class="docutils literal notranslate"><span class="pre">BytesIO().getvalue</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>version</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>The auto-incrementing version number assigned to unique datasets that share name</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
</section>
<section id="2.-Feature">
<h2>2. Feature<a class="headerlink" href="#2.-Feature" title="Permalink to this headline"></a></h2>
<p>Determines the columns that will be used as predictive features during training. Columns is always the last dimension <code class="docutils literal notranslate"><span class="pre">shape[-1]</span></code> of a dataset.</p>
<hr class="docutils" />
<section id="2a.-Methods">
<h3>2a. Methods<a class="headerlink" href="#2a.-Methods" title="Permalink to this headline"></a></h3>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Feature.from_dataset()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Feature</span><span class="o">.</span><span class="n">from_dataset</span><span class="p">(</span>
    <span class="n">dataset_id</span>
    <span class="p">,</span> <span class="n">include_columns</span>
    <span class="p">,</span> <span class="n">exclude_columns</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>dataset_id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Dataset.id</span></code> from which you want to derive <code class="docutils literal notranslate"><span class="pre">Dataset.columns</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>include_columns</strong></p></td>
<td><p>list(str)</p></td>
<td><p>None</p></td>
<td><p>Specify columns that <em>will</em> be included in the Feature. All columns that are not specified will <em>not</em> be included.</p></td>
</tr>
<tr class="row-even"><td><p><strong>exclude_columns</strong></p></td>
<td><p>list(str)</p></td>
<td><p>None</p></td>
<td><p>Specify columns that will <em>not</em> be included in the Feature. All columns that are not specified <em>will</em> be included.</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>If neither <code class="docutils literal notranslate"><span class="pre">include_columns</span></code> nor <code class="docutils literal notranslate"><span class="pre">exclude_columns</span></code> is defined, then all columns will be used.</p>
</div></blockquote>
<blockquote>
<div><p>Both <code class="docutils literal notranslate"><span class="pre">include_columns</span></code> and <code class="docutils literal notranslate"><span class="pre">exclude_columns</span></code> cannot be used at the same time</p>
</div></blockquote>
<hr class="docutils" />
<p><strong>Fetch</strong></p>
<p>Theses methods wrap Dataset’s fetch methods:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Arguments</p></th>
<th class="head"><p>Returns</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>to_arr()</strong></p></td>
<td><p>id:int, columns:list(str)=Feature.columns, samples:list(int)=None</p></td>
<td><p>ndarray 2D / 3D / 4D</p></td>
</tr>
<tr class="row-odd"><td><p><strong>to_df()</strong></p></td>
<td><p>id:int, columns:list(str)=Feature.columns, samples:list(int)=None</p></td>
<td><p>df / list(df) / list(list(df))</p></td>
</tr>
<tr class="row-even"><td><p><strong>get_dtypes()</strong></p></td>
<td><p>id:int, columns:list(str)=Feature.columns</p></td>
<td><p>dict(column=str(np.type))</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
<section id="2b.-Attributes">
<h3>2b. Attributes<a class="headerlink" href="#2b.-Attributes" title="Permalink to this headline"></a></h3>
<p>These are the fields in the Feature table</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>columns</strong></p></td>
<td><p>JSONField</p></td>
<td><p>The columns included in this featureset</p></td>
</tr>
<tr class="row-odd"><td><p><strong>columns_excluded</strong></p></td>
<td><p>JSONField</p></td>
<td><p>The columns, if any, in the dataset that were not included</p></td>
</tr>
<tr class="row-even"><td><p><strong>fitted_featurecoders</strong></p></td>
<td><p>PickleField</p></td>
<td><p>When <code class="docutils literal notranslate"><span class="pre">FeatureCoder</span></code>’s <code class="docutils literal notranslate"><span class="pre">fit</span></code> an sklearn preprocessor to these columns, the fit objects are saved here for downstream <code class="docutils literal notranslate"><span class="pre">inverse_transform</span></code>’ing</p></td>
</tr>
<tr class="row-odd"><td><p><strong>dataset</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>Where these columns came from</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
</section>
<section id="3.-Label">
<h2>3. Label<a class="headerlink" href="#3.-Label" title="Permalink to this headline"></a></h2>
<p>Determines the column(s) that will be used as a target during supervised analysis. Do no create a Label if you intend to conduct unsupervised/ self-supervised analysis.</p>
<hr class="docutils" />
<section id="3a.-Methods">
<h3>3a. Methods<a class="headerlink" href="#3a.-Methods" title="Permalink to this headline"></a></h3>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Label.from_dataset()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Label</span><span class="o">.</span><span class="n">from_dataset</span><span class="p">(</span>
    <span class="n">dataset_id</span>
    <span class="p">,</span> <span class="n">columns</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>dataset_id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Dataset.id</span></code> from which you want to derive <code class="docutils literal notranslate"><span class="pre">Dataset.columns</span></code>. Only Tabular Datasets may be used as a Label.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>columns</strong></p></td>
<td><p>list(str)</p></td>
<td><p>None</p></td>
<td><p>Specify columns that <em>will</em> be included in the Label. If left blank, defaults to all columns. If more than 1 column is
provided, then the data in those columns must be in One-Hot Encoded (OHE) format.</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p><strong>Fetch</strong></p>
<p>Theses methods wrap Dataset’s fetch methods:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Arguments</p></th>
<th class="head"><p>Returns</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>to_arr()</strong></p></td>
<td><p>id:int, columns:list(str)=Label.columns, samples:list(int)=None</p></td>
<td><p>ndarray 2D / 3D / 4D</p></td>
</tr>
<tr class="row-odd"><td><p><strong>to_df()</strong></p></td>
<td><p>id:int, columns:list(str)=Label.columns, samples:list(int)=None</p></td>
<td><p>df / list(df) / list(list(df))</p></td>
</tr>
<tr class="row-even"><td><p><strong>get_dtypes()</strong></p></td>
<td><p>id:int, columns:list(str)=Label.columns</p></td>
<td><p>dict(column=str(np.type))</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
<section id="3b.-Attributes">
<h3>3b. Attributes<a class="headerlink" href="#3b.-Attributes" title="Permalink to this headline"></a></h3>
<p>These are the fields in the Feature table</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>columns</strong></p></td>
<td><p>JSONField</p></td>
<td><p>The column(s) included in this featureset.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>column_count</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>The number of columns in the Label. Used to determine if it is in validated OHE format or not</p></td>
</tr>
<tr class="row-even"><td><p><strong>unique_classes</strong></p></td>
<td><p>JSONField</p></td>
<td><p>Records all of the different values found in categorical columns. Not used for continuous columns.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>fitted_labelcoder</strong></p></td>
<td><p>PickleField</p></td>
<td><p>When a <code class="docutils literal notranslate"><span class="pre">LabelCoder</span></code> <code class="docutils literal notranslate"><span class="pre">fit</span></code>’s an sklearn preprocessor to these columns, the fit objects are saved here for downstream <code class="docutils literal notranslate"><span class="pre">inverse_transform</span></code>’ing</p></td>
</tr>
<tr class="row-even"><td><p><strong>dataset</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>Where these columns came from</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
</section>
<section id="4.-Interpolate">
<h2>4. Interpolate<a class="headerlink" href="#4.-Interpolate" title="Permalink to this headline"></a></h2>
<p>If you don’t have time series data then you do not need interpolation.</p>
<p>If you have continuous columns with missing data in a time series, then interpolation allows you to fill in those blanks mathematically. It does so by fitting a curve to each column. Therefore each column passed to an interpolater must satisfy: <code class="docutils literal notranslate"><span class="pre">np.issubdtype(dtype,</span> <span class="pre">np.floating)</span></code>.</p>
<p>Interpolation is the first preprocessor because you need to fill in blanks prior to encoding.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">pandas.DataFrame.interpolate</span></code></p>
<p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.interpolate.html">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.interpolate.html</a></p>
<p>Is utilized due to its ease of use, variety of methods, and <strong>support of sparse indices</strong>. However, it does not follow the <code class="docutils literal notranslate"><span class="pre">fit/transform</span></code> pattern like many of the class-based sklearn preprocessors, so the interpolated training data is concatenated with the evalaution split during the interpolation of evaluation splits.</p>
</div></blockquote>
<p>Below are the default settings if <code class="docutils literal notranslate"><span class="pre">interpolate_kwargs=None</span></code> that get passed to <code class="docutils literal notranslate"><span class="pre">df.interpolate()</span></code>. In my experience, <code class="docutils literal notranslate"><span class="pre">method=spline</span></code> produces the best results. However, if either (a) spline fails to fit to your data, or (b) you know that your pattern is linear - then try <code class="docutils literal notranslate"><span class="pre">method=linear</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">interpolate_kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">method</span>            <span class="o">=</span> <span class="s1">&#39;spline&#39;</span>
    <span class="p">,</span> <span class="n">limit_direction</span> <span class="o">=</span> <span class="s1">&#39;both&#39;</span>
    <span class="p">,</span> <span class="n">limit_area</span>      <span class="o">=</span> <span class="kc">None</span>
    <span class="p">,</span> <span class="n">axis</span>            <span class="o">=</span> <span class="mi">0</span>
    <span class="p">,</span> <span class="n">order</span>           <span class="o">=</span> <span class="mi">1</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Because the sample dimension is different for each Dataset Type, they approach interpolation differently.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dataset Type</p></th>
<th class="head"><p>Approach</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Tabular</strong></p></td>
<td><p>Unlike encoders, there is no <code class="docutils literal notranslate"><span class="pre">fit</span></code> object. So first the training data rows are interpolated independently. Then, when it comes time to interpolate other splits like validation, the training data is included in the sequence to be interpolated.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Sequence</strong></p></td>
<td><p>Interpolation is ran on each 2D sequence separately</p></td>
</tr>
<tr class="row-even"><td><p><strong>Image</strong></p></td>
<td><p>Interpolation is ran on each 2D channel separately</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<section id="4a.-LabelInterpolater">
<h3>4a. <code class="docutils literal notranslate"><span class="pre">LabelInterpolater</span></code><a class="headerlink" href="#4a.-LabelInterpolater" title="Permalink to this headline"></a></h3>
<p>Label is intended for a single column, so only 1 Interpolater will be used during <code class="docutils literal notranslate"><span class="pre">Label.preprocess()</span></code></p>
<hr class="docutils" />
<section id="4ai.-Methods">
<h4>4ai. Methods<a class="headerlink" href="#4ai.-Methods" title="Permalink to this headline"></a></h4>
<p>└── <code class="docutils literal notranslate"><span class="pre">LabelInterpolater.from_label()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LabelInterpolater</span><span class="o">.</span><span class="n">from_label</span><span class="p">(</span>
    <span class="n">label_id</span>
    <span class="p">,</span> <span class="n">process_separately</span>
    <span class="p">,</span> <span class="n">interpolate_kwargs</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>label_id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>Points to the <code class="docutils literal notranslate"><span class="pre">Label.columns</span></code> to use</p></td>
</tr>
<tr class="row-odd"><td><p><strong>process_separately</strong></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>Used to restrict the fit to the training data, this may be flipped to <code class="docutils literal notranslate"><span class="pre">False</span></code>. However, doing so causes data leakage.</p></td>
</tr>
<tr class="row-even"><td><p><strong>interpolate_kwargs</strong></p></td>
<td><p>dict</p></td>
<td><p>None</p></td>
<td><p>Gets passed to <code class="docutils literal notranslate"><span class="pre">df.interpolate()</span></code>. See <a class="reference internal" href="#4.-Interpolate"><span class="std std-ref">Interpolate</span></a> section for defaults.</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
<section id="4aii.-Attributes">
<h4>4aii. Attributes<a class="headerlink" href="#4aii.-Attributes" title="Permalink to this headline"></a></h4>
<p>These are the fields in the LabelInterpolater table</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>process_separately</strong></p></td>
<td><p>BooleanField</p></td>
<td><p>Whether or not the training data was interpolated by fitting to the entire dataset or not. Indicator of data leakage.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>interpolate_kwargs</strong></p></td>
<td><p>JSONField</p></td>
<td><p>Gets passed to <code class="docutils literal notranslate"><span class="pre">df.interpolate()</span></code>. See <a class="reference internal" href="#4.-Interpolate"><span class="std std-ref">Interpolate</span></a> section for defaults.</p></td>
</tr>
<tr class="row-even"><td><p><strong>matching_columns</strong></p></td>
<td><p>JSONField</p></td>
<td><p>The columns that were successfully interpolated</p></td>
</tr>
<tr class="row-odd"><td><p><strong>label</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>The Label that this LabelInterpolater is applied to</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
</section>
<section id="4b.-FeatureInterpolater">
<h3>4b. <code class="docutils literal notranslate"><span class="pre">FeatureInterpolater</span></code><a class="headerlink" href="#4b.-FeatureInterpolater" title="Permalink to this headline"></a></h3>
<p>For <em>multivariate</em> datasets, columns/dtypes may need to be handled differently. So we use column/dtype filters to apply separate transformations. If the first transformation’s filter includes a certain column/dtype, then subsequent filters may not include that column/dtype.</p>
<hr class="docutils" />
<section id="4bi.-Methods">
<h4>4bi. Methods<a class="headerlink" href="#4bi.-Methods" title="Permalink to this headline"></a></h4>
<p>└── <code class="docutils literal notranslate"><span class="pre">FeatureInterpolater.from_feature()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">FeatureInterpolater</span><span class="o">.</span><span class="n">from_feature</span><span class="p">(</span>
    <span class="n">feature_id</span>
    <span class="p">,</span> <span class="n">process_separately</span>
    <span class="p">,</span> <span class="n">interpolate_kwargs</span>
    <span class="p">,</span> <span class="n">dtypes</span>
    <span class="p">,</span> <span class="n">columns</span>
    <span class="p">,</span> <span class="n">verbose</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>feature_id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>Points to the <code class="docutils literal notranslate"><span class="pre">Feature.columns</span></code> to use</p></td>
</tr>
<tr class="row-odd"><td><p><strong>process_separately</strong></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>Used to restrict the fit to the training data, this may be flipped to <code class="docutils literal notranslate"><span class="pre">False</span></code>. However, doing so causes data leakage.</p></td>
</tr>
<tr class="row-even"><td><p><strong>interpolate_kwargs</strong></p></td>
<td><p>dict</p></td>
<td><p>None</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">interpolate_kwargs:dict=None</span></code> object is what gets passed to Pandas interpolation. In my experience,
<code class="docutils literal notranslate"><span class="pre">method=spline</span></code> produces the best results. However, if either (a) spline fails to fit to your data, or (b) you know that
your pattern is linear - then try <code class="docutils literal notranslate"><span class="pre">method=linear</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>dtypes</strong></p></td>
<td><p>list(str)</p></td>
<td><p>None</p></td>
<td><p>The dtypes to include</p></td>
</tr>
<tr class="row-even"><td><p><strong>columns</strong></p></td>
<td><p>list(str)</p></td>
<td><p>None</p></td>
<td><p>The columns to include. Errors if any of the columns were already included by dtypes.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>verbose</strong></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>If True, messages will be printed about the status of the interpolaters as they attempt to fit on the filtered columns</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
<section id="4bii.-Attributes">
<h4>4bii. Attributes<a class="headerlink" href="#4bii.-Attributes" title="Permalink to this headline"></a></h4>
<p>These are the fields in the FeatureInterpolater table</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>idx</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>Zero-based auto-incrementer that counts the number of FeatureInterpolaters attached to a Feature.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>process_separately</strong></p></td>
<td><p>BooleanField</p></td>
<td><p>Whether or not the training data was interpolated by fitting to the entire dataset or not. Indicator of data leakage.</p></td>
</tr>
<tr class="row-even"><td><p><strong>interpolate_kwargs</strong></p></td>
<td><p>JSONField</p></td>
<td><p>Gets passed to <code class="docutils literal notranslate"><span class="pre">df.interpolate()</span></code>. See <a class="reference internal" href="#4.-Interpolate"><span class="std std-ref">Interpolate</span></a> section for defaults.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>matching_columns</strong></p></td>
<td><p>JSONField</p></td>
<td><p>The columns that matched the filter</p></td>
</tr>
<tr class="row-even"><td><p><strong>leftover_columns</strong></p></td>
<td><p>JSONField</p></td>
<td><p>The columns that were not included in the filter</p></td>
</tr>
<tr class="row-odd"><td><p><strong>leftover_dtypes</strong></p></td>
<td><p>JSONField</p></td>
<td><p>The dtypes that were not included in the filter</p></td>
</tr>
<tr class="row-even"><td><p><strong>original_filter</strong></p></td>
<td><p>JSONField</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dict().keys()==['include','dtypes','columns']</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>feature</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>The Feature that this FeatureInterpolater is applied to</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
</section>
</section>
<section id="5.-Encode">
<h2>5. Encode<a class="headerlink" href="#5.-Encode" title="Permalink to this headline"></a></h2>
<p>Transform data into numerical format that is close to zero. Reference <a class="reference external" href="https://docs.aiqc.io/pages/explainer.html">Encoding</a> for more information.</p>
<p>There are two phases of encoding: 1. <code class="docutils literal notranslate"><span class="pre">fit</span></code> on train - where the encoder learns about the values of the samples made available to it. Ideally, you only want to <code class="docutils literal notranslate"><span class="pre">fit</span></code> aka learn from your training split so that you are not <a class="reference external" href="https://towardsdatascience.com/data-leakage-5dfc2e0127d4">leaking</a> information from your validation and test spits into your model! However, categorical encoders are always fit on the entire dataset because they are not prone to leakage and any weights tied to empty OHE
inputs will zero-out. 2. <code class="docutils literal notranslate"><span class="pre">transform</span></code> each split/fold</p>
<blockquote>
<div><p>Only <a class="reference external" href="https://scikit-learn.org/stable/modules/classes.html#module-sklearn.preprocessing">sklearn.preprocessing</a> methods are officially supported, but we have experimented with <code class="docutils literal notranslate"><span class="pre">sklearn.feature_extraction.text.CountVectorizer</span></code></p>
</div></blockquote>
<hr class="docutils" />
<section id="5a.-LabelCoder">
<h3>5a. <code class="docutils literal notranslate"><span class="pre">LabelCoder</span></code><a class="headerlink" href="#5a.-LabelCoder" title="Permalink to this headline"></a></h3>
<p>Label is intended for a single column, so only 1 LabelCoder will be used during <code class="docutils literal notranslate"><span class="pre">Label.preprocess()</span></code></p>
<blockquote>
<div><p>Unfortunately, the name “LabelEncoder” is occupied by <code class="docutils literal notranslate"><span class="pre">sklearn.preprocessing.LabelEncoder</span></code></p>
</div></blockquote>
<hr class="docutils" />
<section id="5ai.-Methods">
<h4>5ai. Methods<a class="headerlink" href="#5ai.-Methods" title="Permalink to this headline"></a></h4>
<p>└── <code class="docutils literal notranslate"><span class="pre">LabelCoder.from_label()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LabelCoder</span><span class="o">.</span><span class="n">from_label</span><span class="p">(</span>
    <span class="n">label_id</span>
    <span class="p">,</span> <span class="n">sklearn_preprocess</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>label_id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>Points to the <code class="docutils literal notranslate"><span class="pre">Label.columns</span></code> to use</p></td>
</tr>
<tr class="row-odd"><td><p><strong>sklearn_preprocess</strong></p></td>
<td><p>object</p></td>
<td><p>Required</p></td>
<td><p>An instantiated <code class="docutils literal notranslate"><span class="pre">sklearn.preprocessing</span></code> class-based encoder - e.g. <code class="docutils literal notranslate"><span class="pre">StandardScaler()</span></code> neither <code class="docutils literal notranslate"><span class="pre">StandardScaler</span></code> nor
<code class="docutils literal notranslate"><span class="pre">scale()</span></code>. AIQC will automatically correct the attributes of your encoder to smooth out any common errors they would
cause. For example, preventing sparse SciPy matrix output (errors during tensor conversion) and data <code class="docutils literal notranslate"><span class="pre">copy()</span></code>.</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
<section id="5aii.-Attributes">
<h4>5aii. Attributes<a class="headerlink" href="#5aii.-Attributes" title="Permalink to this headline"></a></h4>
<p>These are the fields in the LabelCoder table</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>only_fit_train</strong></p></td>
<td><p>BooleanField</p></td>
<td><p>Whether or not the encoder was fit on the training data or the entire dataset</p></td>
</tr>
<tr class="row-odd"><td><p><strong>is_categorical</strong></p></td>
<td><p>BooleanField</p></td>
<td><p>If the encoder is meant for categorical data, and therefore automatically fit on the entire dataset</p></td>
</tr>
<tr class="row-even"><td><p><strong>sklearn_preprocess</strong></p></td>
<td><p>PickleField</p></td>
<td><p>The instantiated sklearn.preprocessing class that was fit</p></td>
</tr>
<tr class="row-odd"><td><p><strong>matching_columns</strong></p></td>
<td><p>JSONField</p></td>
<td><p>The columns that matched the dtype/ column name filters</p></td>
</tr>
<tr class="row-even"><td><p><strong>encoding_dimension</strong></p></td>
<td><p>CharField</p></td>
<td><p>Did the encoder succeed on 1D/ 2D uni-column/ 2D multi-column?</p></td>
</tr>
<tr class="row-odd"><td><p><strong>label</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>The Label that this LabelCoder is applied to</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
</section>
<section id="5b.-FeatureCoder">
<h3>5b. <code class="docutils literal notranslate"><span class="pre">FeatureCoder</span></code><a class="headerlink" href="#5b.-FeatureCoder" title="Permalink to this headline"></a></h3>
<p>For <em>multivariate</em> datasets, columns/dtypes may need to be handled differently. So we use column/dtype filters to apply separate transformations. If the first transformation’s filter includes a certain column/dtype, then subsequent filters may not include that column/dtype.</p>
<hr class="docutils" />
<section id="5bi.-Methods">
<h4>5bi. Methods<a class="headerlink" href="#5bi.-Methods" title="Permalink to this headline"></a></h4>
<p>└── <code class="docutils literal notranslate"><span class="pre">FeatureCoder.from_feature()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">FeatureCoder</span><span class="o">.</span><span class="n">from_feature</span><span class="p">(</span>
    <span class="n">feature_id</span>
    <span class="p">,</span> <span class="n">sklearn_preprocess</span>
    <span class="p">,</span> <span class="n">include</span>
    <span class="p">,</span> <span class="n">dtypes</span>
    <span class="p">,</span> <span class="n">columns</span>
    <span class="p">,</span> <span class="n">verbose</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>feature_id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>Points to the <code class="docutils literal notranslate"><span class="pre">Feature.columns</span></code> to use</p></td>
</tr>
<tr class="row-odd"><td><p><strong>sklearn_preprocess</strong></p></td>
<td><p>object</p></td>
<td><p>Required</p></td>
<td><p>An instantiated <code class="docutils literal notranslate"><span class="pre">sklearn.preprocessing</span></code> class-based encoder - e.g. <code class="docutils literal notranslate"><span class="pre">StandardScaler()</span></code> neither <code class="docutils literal notranslate"><span class="pre">StandardScaler</span></code> nor
<code class="docutils literal notranslate"><span class="pre">scale()</span></code>. AIQC will automatically correct the attributes of your encoder to smooth out any common errors they would
cause. For example, preventing sparse SciPy matrix output (errors during tensor conversion) and data <code class="docutils literal notranslate"><span class="pre">copy()</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>include</strong></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>Whether to include or exclude the dtypes/columns that match the filter. You can create a filter for all columns by setting
<code class="docutils literal notranslate"><span class="pre">include=False</span></code> and then setting both <code class="docutils literal notranslate"><span class="pre">dtypes</span></code> and <code class="docutils literal notranslate"><span class="pre">columns</span></code> to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>dtypes</strong></p></td>
<td><p>list(str)</p></td>
<td><p>None</p></td>
<td><p>The dtypes to filter</p></td>
</tr>
<tr class="row-even"><td><p><strong>columns</strong></p></td>
<td><p>list(str)</p></td>
<td><p>None</p></td>
<td><p>The columns to filter. Errors if any of the columns were already used by dtypes.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>verbose</strong></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>If True, messages will be printed about the status of the encoders as they attempt to fit on the filtered columns</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
<section id="5bii.-Attributes">
<h4>5bii. Attributes<a class="headerlink" href="#5bii.-Attributes" title="Permalink to this headline"></a></h4>
<p>These are the fields in the FeatureCoder table</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>idx</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>Zero-based auto-incrementer that counts the number of FeatureCoders attached to a Feature.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>sklearn_preprocess</strong></p></td>
<td><p>PickleField</p></td>
<td><p>The instantiated sklearn.preprocessing class that was fit</p></td>
</tr>
<tr class="row-even"><td><p><strong>encoded_column_names</strong></p></td>
<td><p>JSONField</p></td>
<td><p>After the columns are encoded, what are their names? OHE appends <code class="docutils literal notranslate"><span class="pre">_&lt;category&gt;</span></code> to the original column names as it expands</p></td>
</tr>
<tr class="row-odd"><td><p><strong>matching_columns</strong></p></td>
<td><p>JSONField</p></td>
<td><p>The columns that matched the filter</p></td>
</tr>
<tr class="row-even"><td><p><strong>leftover_columns</strong></p></td>
<td><p>JSONField</p></td>
<td><p>The columns that were not included in the filter</p></td>
</tr>
<tr class="row-odd"><td><p><strong>leftover_dtypes</strong></p></td>
<td><p>JSONField</p></td>
<td><p>The dtypes that were not included in the filter</p></td>
</tr>
<tr class="row-even"><td><p><strong>original_filter</strong></p></td>
<td><p>JSONField</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dict().keys()==['include','dtypes','columns']</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>encoding_dimension</strong></p></td>
<td><p>CharField</p></td>
<td><p>Did the encoder succeed on 1D/ 2D uni-column/ 2D multi-column?</p></td>
</tr>
<tr class="row-even"><td><p><strong>only_fit_train</strong></p></td>
<td><p>BooleanField</p></td>
<td><p>Whether or not the encoder was fit on the training data or the entire dataset</p></td>
</tr>
<tr class="row-odd"><td><p><strong>is_categorical</strong></p></td>
<td><p>BooleanField</p></td>
<td><p>If the encoder is meant for categorical data, and therefore automatically fit on the entire dataset</p></td>
</tr>
<tr class="row-even"><td><p><strong>feature</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>The Feature that this FeatureCoder is applied to</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
</section>
</section>
<section id="6.-Shape">
<h2>6. Shape<a class="headerlink" href="#6.-Shape" title="Permalink to this headline"></a></h2>
<p>Changes the shape of data. Only supports Features, not Labels.</p>
<p>Reshaping is applied at the end of <code class="docutils literal notranslate"><span class="pre">Feature.preprocess()</span></code>. So if the feature data has been altered via time series windowing or One Hot Encoder, then those changes will be reflected in the shape that is fed to `</p>
<p>When working with architectures that are highly dimensional such convolutional and recurrent networks (Conv1D, Conv2D, Conv3D / ConvLSTM1D, ConvLSTM2D, ConvLSTM3D), you’ll often find yourself needing to reshape data to fit a layer’s required input shape.</p>
<ul class="simple">
<li><p><em>Reducing unused dimensions</em> - When working with grayscale images (1 channel, 25 rows, 25 columns) it’s better to use Conv1D instead of Conv2D.</p></li>
<li><p><em>Adding wrapper dimensions</em> - Perhaps your data is a fit for ConvLSTM1D, but that layer is only supported in the nightly TensorFlow build so you want to add a wrapper dimension in order to use the production-ready ConvLSTM2D.</p></li>
</ul>
<p>AIQC favors a <em>“channels_first”</em> (samples, channels, rows, columns) approach as opposed to <em>“channels_last”</em> (samples, rows, columns, channels).</p>
<blockquote>
<div><p><em>Can’t I just reshape the tensors during the training loop?</em> You could. However, AIQC systemtically provides the shape of features and labels to <code class="docutils literal notranslate"><span class="pre">Algorith.fn_build</span></code> to make designing the topology easier, so it’s best to get the shape right beforehand. Additionally, if you reshape your data within the training loop, then you may also need to reshape the output of <code class="docutils literal notranslate"><span class="pre">Algorithm.fn_predict</span></code> so that it is correctly formatted for automatic post-processing. It’s also more computationally efficient
to do the reshaping once up front.</p>
</div></blockquote>
<hr class="docutils" />
<p>The <code class="docutils literal notranslate"><span class="pre">reshape_indices</span></code> argument is ultimately fed to <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.reshape.html">np.reshape(newshape)</a>. We use <em>index n</em> to point to the value at <code class="docutils literal notranslate"><span class="pre">ndarray.shape[n]</span></code>.</p>
<p><strong>Reshaping by Index</strong></p>
<p>Let’s say we have a 4D feature consisting of 3D images <code class="docutils literal notranslate"><span class="pre">(samples</span> <span class="pre">*</span> <span class="pre">channels</span> <span class="pre">*</span> <span class="pre">rows</span> <span class="pre">*</span> <span class="pre">columns)</span></code>. Our problems is that the images are B&amp;W, so we don’t want a color channel because it would add unecessary dimensionality to our model. So we want to drop the dimension at the shape index <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">reshape_indices</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Thus we have wrangled ourselves a 3D feature consisting of 2D images <code class="docutils literal notranslate"><span class="pre">(samples</span> <span class="pre">*</span> <span class="pre">rows</span> <span class="pre">*</span> <span class="pre">columns)</span></code>.</p>
<p><strong>Reshaping Explicitly</strong></p>
<p>But what if the dimensions we want cannot be expressed by rearranging the existing indices? If you define a number as a <code class="docutils literal notranslate"><span class="pre">str</span></code>, then that number will be used as directly as the value at that position.</p>
<p>So if I wanted to add an extra wrapper dimension to my data to serve as a single color channel, I would simply do:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">reshape_indices</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<blockquote>
<div><p><em>Then couldn’t I just hardcode my shapes with strings?</em> Yes, but <code class="docutils literal notranslate"><span class="pre">FeatureShaper</span></code> is applied to all of the splits, which are assumed to have different shapes, which is why we use the indices.</p>
</div></blockquote>
<p><strong>Multiplicative Reshaping</strong></p>
<p>Sometimes you need to stack/nest dimensions. This requires multiplying one shape index by another.</p>
<p>For example, if I have a 3 separate hours worth of data and I want to treat it as 180 minutes, then I need to go from a shape of (3 hours * 60 minutes) to (180 minutes). Just provide the shape indices that you want to multiply in a <code class="docutils literal notranslate"><span class="pre">tuple</span></code> like so:</p>
<blockquote>
<div><p>&lt;!&gt; if your model is unsupervised (aka generative or self-supervised), then it must output data in <em>“column (aka width) last”</em> shape. Otherwise, automated column decoding will be applied along the wrong dimension.</p>
</div></blockquote>
<hr class="docutils" />
<section id="6a.-Methods">
<h3>6a. Methods<a class="headerlink" href="#6a.-Methods" title="Permalink to this headline"></a></h3>
<p>└── <code class="docutils literal notranslate"><span class="pre">FeatureShaper.from_feature()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">FeatureShaper</span><span class="o">.</span><span class="n">from_feature</span><span class="p">(</span>
    <span class="n">feature_id</span>
    <span class="p">,</span> <span class="n">reshape_indices</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>feature_id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Feature.id</span></code> to use</p></td>
</tr>
<tr class="row-odd"><td><p><strong>reshape_indices</strong></p></td>
<td><p>tuple(int/str/tuple)</p></td>
<td><p>Required</p></td>
<td><p>See Strategies.</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
<section id="6b.-Attributes">
<h3>6b. Attributes<a class="headerlink" href="#6b.-Attributes" title="Permalink to this headline"></a></h3>
<p>These are the fields of the FeatureShaper table</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>reshape_indices</strong></p></td>
<td><p>PickleField</p></td>
<td><p>See #Reshaping-by-Index.Pickle because tuple has no JSON equivalent.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>column_position</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>The shape index used for columns aka width.</p></td>
</tr>
<tr class="row-even"><td><p><strong>feature</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>The Feature that reshaping is applied to.</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
</section>
<section id="7.-Window">
<h2>7. Window<a class="headerlink" href="#7.-Window" title="Permalink to this headline"></a></h2>
<p>Window facilitates sliding windows for a time series Feature. It does not apply to Labels. This is used for unsupervised (aka self-supervised) walk-forward forecasting for time series data.</p>
<p><code class="docutils literal notranslate"><span class="pre">size_window</span></code> determine how many timepoints are included in a window, and <code class="docutils literal notranslate"><span class="pre">size_shift</span></code> determines how many timepoints to slide over before defining a new window.</p>
<blockquote>
<div><p>For example, if we want to be able to <em>predict the next 7 days</em> worth of weather <em>using the past 21 days</em> of weather, then our <code class="docutils literal notranslate"><span class="pre">size_window=21</span></code> and our <code class="docutils literal notranslate"><span class="pre">size_shift=7</span></code>.</p>
</div></blockquote>
<hr class="docutils" />
<p><strong>Challenges</strong></p>
<p>Dealing with stratified windowed data demands a systematic approach.</p>
<p><img alt="windowDimensions" src="../_images/window_dimensions.png" /></p>
<p><strong>Windowing always increases dimensionality</strong></p>
<p>After data is windowed, its dimensionality increases by 1. Why? Well, originally we had a <em>single time series</em>. However, if we window that data, then we have <em>many time series subsets</em>.</p>
<p><img alt="interpolateWindows" src="../_images/interpolate_windows.png" /></p>
<p><strong>As the highest dimension, it becomes the “sample”</strong></p>
<p>No matter what dimensionality the original data has, it will be windowed along the first dimension.</p>
<p>This means that the windows now serve as the samples, which is important for stratification. If we have a year’s worth of windows, we don’t want all of our training windows to come from the same season. Therefore, Window must be created prior to Splitset.</p>
<p><strong>Windowing may causes overlap in splits</strong></p>
<p>In addition to increasing the dimensionality of our data, it makes it harder to nail down the boundaries of our splits in order to prevent data leakage.</p>
<p>As seen in the diagram above, the timesteps of the train and test splits may <em>overlap</em>. So if we are fitting an interpolater to our training split, the first 3 NaNs would be included, but the last 2 would not.</p>
<p><img alt="Windows" src="../_images/sliding_windows.png" /></p>
<p><strong>Shifted and unshifted windows</strong></p>
<p>In a walk-forward analysis, we learn about the future by looking at the past. So we need 2 sets of windows:</p>
<ul class="simple">
<li><p><em>Unshifted windows</em> (orange in diagram above): represent the past and serves as the features we learn from</p></li>
<li><p><em>Shifted windows</em> (green in diagram above): represent the future and serves as the target we predict</p></li>
</ul>
<p>However, when conducting inference, we are trying to predict the shifted windows not learn from them. So we don’t need to record any shifted windows.</p>
<hr class="docutils" />
<section id="7a.-Methods">
<h3>7a. Methods<a class="headerlink" href="#7a.-Methods" title="Permalink to this headline"></a></h3>
<p>└── <code class="docutils literal notranslate"><span class="pre">Window.from_feature()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Window</span><span class="o">.</span><span class="n">from_feature</span><span class="p">(</span>
    <span class="n">feature_id</span>
    <span class="p">,</span> <span class="n">size_window</span>
    <span class="p">,</span> <span class="n">size_shift</span>
    <span class="p">,</span> <span class="n">record_shifted</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>dataset_id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Feature.id</span></code> from which you want to derive windows.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>size_window</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>The number of timesteps to include in a window.</p></td>
</tr>
<tr class="row-even"><td><p><strong>size_shift</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>The number of timesteps to shift forward.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>record_shifted</strong></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>Whether or not we want to keep a shifted set of windows around. During pure inference, this is False.</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
<section id="7b.-Attributes">
<h3>7b. Attributes<a class="headerlink" href="#7b.-Attributes" title="Permalink to this headline"></a></h3>
<p>These are the fields of the Window table</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>size_window</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>Number of timesteps in each window</p></td>
</tr>
<tr class="row-odd"><td><p><strong>size_shift</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>The number of timesteps in the shift forward.</p></td>
</tr>
<tr class="row-even"><td><p><strong>window_count</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>Not a relationship count! Number of windows in the dataset. This becomes the new samples dimension for stratification.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>samples_unshifted</strong></p></td>
<td><p>JSONField</p></td>
<td><p>Underlying sample indices of each window in the past-shifted windows.</p></td>
</tr>
<tr class="row-even"><td><p><strong>samples_shifted</strong></p></td>
<td><p>JSONField</p></td>
<td><p>Underlying sample indices of each window in the future-shifted windows.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>feature</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>The Feature that this windowing is applied to</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
</section>
<section id="8.-Splitset">
<h2>8. Splitset<a class="headerlink" href="#8.-Splitset" title="Permalink to this headline"></a></h2>
<p>Used for sample stratification. Reference <a class="reference external" href="https://docs.aiqc.io/pages/explainer.html">Stratification</a> section of the Explainer.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Split</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>train</strong></p></td>
<td><p>The samples that the model will be trained upon. Later, we’ll see how we can make <em>cross-folds from our training split</em>. Unsupervised learning will only have a training split.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>validation</strong> (optional)</p></td>
<td><p>The samples used for training evaluation. Ensures that the test set is not revealed to the model during training.</p></td>
</tr>
<tr class="row-even"><td><p><strong>test</strong> (optional)</p></td>
<td><p>The samples the model has never seen during training. Used to assess how well the model will perform on unobserved, natural data when it is applied in the real world aka how generalizable it is.</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>Because Splitset groups together all of the data wrangling entities (Features, Label, Folds) it essentially represents a <em>Pipeline</em>, which is why it bears the name Pipeline in the High-Level API.</p>
</div></blockquote>
<hr class="docutils" />
<p><strong>Cross-Validation</strong></p>
<p>Cross-validation is triggered by <code class="docutils literal notranslate"><span class="pre">fold_count:int</span></code> during Splitset creation. Reference the <a class="reference external" href="https://scikit-learn.org/stable/modules/cross_validation.html">scikit-learn documentation</a> to learn more about cross-validation.</p>
<p><img alt="CrossFoldBins" src="../_images/cross_fold_bins.png" /></p>
<p>Each row in the diagram above is a <code class="docutils literal notranslate"><span class="pre">Fold</span></code> object.</p>
<p>Each green/blue box represents a bin of stratified samples. During preprocessing and training, we rotate which blue bin serves as the validation samples (<code class="docutils literal notranslate"><span class="pre">fold_validation</span></code>). The remaining green bins in the row serve as the training samples (<code class="docutils literal notranslate"><span class="pre">folds_train_combined</span></code>).</p>
<p>Let’s say we defined <code class="docutils literal notranslate"><span class="pre">fold_count=5</span></code>. What are the implications?</p>
<ul class="simple">
<li><p>Creates 5 <code class="docutils literal notranslate"><span class="pre">Folds</span></code> related to a <code class="docutils literal notranslate"><span class="pre">Splitset</span></code>.</p></li>
<li><p>5x more preprocessing and caching; each <code class="docutils literal notranslate"><span class="pre">fold_validation</span></code> is excluded from the <code class="docutils literal notranslate"><span class="pre">fit</span></code> on <code class="docutils literal notranslate"><span class="pre">folds_train_combinared</span></code>. Fits are saved to the <code class="docutils literal notranslate"><span class="pre">orm.Fold</span></code> object as opposed to the <code class="docutils literal notranslate"><span class="pre">orm.Feature/Label</span></code> objects.</p></li>
<li><p>5x more models will be trained for each experiment.</p></li>
<li><p>5x more evaluation.</p></li>
</ul>
<p><em>Disclaimer about inherent limitations &amp; challenges</em></p>
<blockquote>
<div><p>Do not use cross-validation unless the distribution of each resulting fold (<em>total sample count divided by fold_count</em>) is representatitve of your broader sample population. If you are ignoring that advice and stretching to perform cross-validation, then at least ensure that the <em>total sample count is evenly divisble by fold_count</em>. Both of these tips help avoid poorly stratified/ undersized folds that seem to perform either unjustifiably well (100% accuracy when only the most common label
class is present) or poorly (1 incorrect prediction in a small fold negatively skews an otherwise good model).</p>
<p>If you’ve ever performed cross-validation manually with too few samples, then you’ll know that it’s easy enough to construct the folds, but then it’s a pain to calculate performance metrics (e.g. <code class="docutils literal notranslate"><span class="pre">zero_division</span></code>, absent OHE classes) due to the absence of outlying classes and bins. Time has been invested to handle these scenarios elegantly so that folds can be treated as first-class-citizens alongside splits. That being said, if you try to do something undersized like multi-label
classification using 150 samples then you may run into errors during evaluation.</p>
</div></blockquote>
<hr class="docutils" />
<p><strong>Samples Cache</strong></p>
<p>Each Splitset has as <code class="docutils literal notranslate"><span class="pre">cache_path</span></code> attribute, which represents a local directory where preprocessed data is stored during training &amp; evaluation.</p>
<p>The output of <code class="docutils literal notranslate"><span class="pre">feature.preprocess()</span></code> and <code class="docutils literal notranslate"><span class="pre">label.preprocess()</span></code> are written to this folder prior to training so that:</p>
<ol class="arabic simple">
<li><p>Each Job does not have to preprocess data from scratch.</p></li>
<li><p>The original data does not need to be held in memory between Jobs.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>└──<span class="w"> </span>aiqc/cache/samples/splitset_uid
<span class="w">    </span>└──<span class="w"> </span>&lt;fold_index&gt;<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="s2">&quot;no_fold&quot;</span>
<span class="w">        </span>└──<span class="w"> </span>&lt;split&gt;
<span class="w">            </span>└──<span class="w"> </span>label.npy
<span class="w">            </span>└──<span class="w"> </span>feature_&lt;i&gt;.npy
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;fold_index&gt;</span></code> is a folder for each Fold, since they have different samples. Whereas “no_fold” is a single folder for a regular splitset where there are no folds. ‘no_fold’ just keeps the folder depth uniform for regular splitsets</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;split&gt;</span></code>: The <code class="docutils literal notranslate"><span class="pre">samples[&lt;split&gt;]</span></code> of interest: ‘train’, ‘validation’, ‘folds_train_combined’, ‘fold_validation’, ‘test’.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">feature_&lt;n&gt;</span></code> accounts for Splitsets with more than 1 Feature.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">Splitset.cache_hot:bool</span></code> argument indicates whether or not the cache for that splitset is populated or not.</p>
<p>Samples are automatically cached during <code class="docutils literal notranslate"><span class="pre">Queue.run_jobs()</span></code>.</p>
<p>See also: <code class="docutils literal notranslate"><span class="pre">orm.splitset.clear_cache()</span></code> and <code class="docutils literal notranslate"><span class="pre">utils.config.clear_cache_all()</span></code></p>
<hr class="docutils" />
<section id="8a.-Methods">
<h3>8a. Methods<a class="headerlink" href="#8a.-Methods" title="Permalink to this headline"></a></h3>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Splitset.make()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Splitset</span><span class="o">.</span><span class="n">make</span><span class="p">(</span>
    <span class="n">feature_ids</span>
    <span class="p">,</span> <span class="n">label_id</span>
    <span class="p">,</span> <span class="n">size_test</span>
    <span class="p">,</span> <span class="n">size_validation</span>
    <span class="p">,</span> <span class="n">bin_count</span>
    <span class="p">,</span> <span class="n">fold_count</span>
    <span class="p">,</span> <span class="n">unsupervised_stratify_col</span>
    <span class="p">,</span> <span class="n">name</span>
    <span class="p">,</span> <span class="n">description</span>
    <span class="p">,</span> <span class="n">predictor_id</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>feature_ids</strong></p></td>
<td><p>list(int)</p></td>
<td><p>Required</p></td>
<td><p>Multiple <code class="docutils literal notranslate"><span class="pre">Feature.id</span></code>’s may be included to enable multi-modal (aka mixed data-type) analysis. All of these Features must
have the same number of samples.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>label_id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The Label to be used as a target for supervised analysis. Must have the sample number of samples as the Features.</p></td>
</tr>
<tr class="row-even"><td><p><strong>size_test</strong></p></td>
<td><p>float</p></td>
<td><p>None</p></td>
<td><p>Percent of samples to be placed into the test split. Must be <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">0.0</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;</span> <span class="pre">1.0</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>size_validation</strong></p></td>
<td><p>float</p></td>
<td><p>None</p></td>
<td><p>Percent of samples to be placed into the validation split. Must be <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">0.0</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;</span> <span class="pre">1.0</span></code>. If this is not None and used
in combination with <code class="docutils literal notranslate"><span class="pre">fold_count</span></code>, then there will be 4 splits.</p></td>
</tr>
<tr class="row-even"><td><p><strong>bin_count</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>For continous stratification columns, how many bins (aka quantiles) should be used?</p></td>
</tr>
<tr class="row-odd"><td><p><strong>fold_count</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The number or cross-validation folds to generate. See Cross-Validation.</p></td>
</tr>
<tr class="row-even"><td><p><strong>unsupervised_stratify_col</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>Used during unsupervised analysis. Specify a column from the first Feature in feature_ids to use for stratification. For
example, when forecasting, it may make sense to stratify by the day of the year.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>name</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>Used for versioning a pipeline (collection of inputs, label, and stratification). Two versions cannot have identical
attributes.</p></td>
</tr>
<tr class="row-even"><td><p><strong>description</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>What is unique about this this pipeline?</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">size_train</span> <span class="pre">=</span> <span class="pre">1.00</span> <span class="pre">-</span> <span class="pre">(size_test</span> <span class="pre">+</span> <span class="pre">size_validation)</span></code> the backend ensures that the sizes sum to 1.00</p>
</div></blockquote>
<blockquote>
<div><p><em>How does continuous binning work?</em> Reference the handy <code class="docutils literal notranslate"><span class="pre">Pandas.qcut()</span></code> and the source code <code class="docutils literal notranslate"><span class="pre">pd.qcut(x=array_to_bin,</span> <span class="pre">q=bin_count,</span> <span class="pre">labels=False,</span> <span class="pre">duplicates='drop')</span></code> for more detail.</p>
</div></blockquote>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Splitset.cache_samples()</span></code></p>
<p>See <a class="reference internal" href="#8.-Splitset"><span class="std std-ref">Samples Cache</span></a> section for a description</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Splitset</span><span class="o">.</span><span class="n">cache_samples</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 6%" />
<col style="width: 13%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>The identifier of the Splitset of interest</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Splitset.clear_cache()</span></code></p>
<p>See <a class="reference internal" href="#8.-Splitset"><span class="std std-ref">Samples Cache</span></a> section for a description. Deletes the entire directory located at <code class="docutils literal notranslate"><span class="pre">Splitset.cache_path</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Splitset</span><span class="o">.</span><span class="n">clear_cache</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 6%" />
<col style="width: 13%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>The identifier of the Splitset of interest</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Splitset.fetch_cache()</span></code></p>
<p>See <a class="reference internal" href="#8.-Splitset"><span class="std std-ref">Samples Cache</span></a> section for a description. This fetches a specific file from the cache.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Splitset</span><span class="o">.</span><span class="n">fetch_cache</span><span class="p">(</span>
    <span class="nb">id</span>
    <span class="p">,</span> <span class="n">split</span>
    <span class="p">,</span> <span class="n">label_features</span>
    <span class="p">,</span> <span class="n">fold_id</span>
    <span class="p">,</span> <span class="n">library</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>The identifier of the Splitset of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>split</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">samples[&lt;split&gt;]</span></code> of interest: ‘train’, ‘validation’, ‘folds_train_combined’, ‘fold_validation’, ‘test’.</p></td>
</tr>
<tr class="row-even"><td><p><strong>label_features</strong></p></td>
<td><p>str</p></td>
<td><p>Required</p></td>
<td><p>Either <code class="docutils literal notranslate"><span class="pre">'label'</span></code> or <code class="docutils literal notranslate"><span class="pre">'features'</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>fold_id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The identifier of the Fold of interest, if any</p></td>
</tr>
<tr class="row-even"><td><p><strong>library</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">'pytorch'</span></code>, it will convert each returned array to <code class="docutils literal notranslate"><span class="pre">FloatTensor()</span></code></p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 43%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">label_features</span></code> Value</p></th>
<th class="head"><p>Returns</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'label'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ndarray</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'features'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ndarray</span></code> or <code class="docutils literal notranslate"><span class="pre">list(ndarray)</span></code></p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
<section id="8b.-Attributes">
<h3>8b. Attributes<a class="headerlink" href="#8b.-Attributes" title="Permalink to this headline"></a></h3>
<p>These are the fields of the Splitset table</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>cache_path</strong></p></td>
<td><p>CharField</p></td>
<td><p>Where the splitset stores its cached samples</p></td>
</tr>
<tr class="row-odd"><td><p><strong>cache_hot</strong></p></td>
<td><p>BooleanField</p></td>
<td><p>If the samples are currently stored in the cache</p></td>
</tr>
<tr class="row-even"><td><p><strong>samples</strong></p></td>
<td><p>JSONField</p></td>
<td><p>The bins that splits have been stratified into <code class="docutils literal notranslate"><span class="pre">dict(split=[sample_indices])</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>sizes</strong></p></td>
<td><p>JSONField</p></td>
<td><p>Human-readable sizes of the splits <code class="docutils literal notranslate"><span class="pre">dict(split=dict(percent=float,count=int))</span></code></p></td>
</tr>
<tr class="row-even"><td><p><strong>supervision</strong></p></td>
<td><p>CharField</p></td>
<td><p>Either “supervised” or “unsupervised” if the Splitset has a Label.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>has_validation</strong></p></td>
<td><p>BooleanField</p></td>
<td><p>Logical flag indicating if this Splitset has a validation split.</p></td>
</tr>
<tr class="row-even"><td><p><strong>fold_count</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>The number of cross-validation <code class="docutils literal notranslate"><span class="pre">Folds</span></code> that belong to this Splitset</p></td>
</tr>
<tr class="row-odd"><td><p><strong>bin_count</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>The number of bins used to stratify a continuous column label or unsupervised_stratify column</p></td>
</tr>
<tr class="row-even"><td><p><strong>unsupervised_stratifyCol</strong></p></td>
<td><p>CharField</p></td>
<td><p>Used during unsupervised analysis. Specify a column from the first Feature in feature_ids to use for stratification. For example, when forecasting, it may make
sense to stratify by the day of the year.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>key_train</strong></p></td>
<td><p>CharField</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'train'</span></code> by default, but <code class="docutils literal notranslate"><span class="pre">'folds_train_combined'</span></code> if Splitset has Folds. <code class="docutils literal notranslate"><span class="pre">None</span></code> for an inference splitset.</p></td>
</tr>
<tr class="row-even"><td><p><strong>key_evaluation</strong></p></td>
<td><p>CharField</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'test'</span></code> if neither validation split nor Folds are used. <code class="docutils literal notranslate"><span class="pre">'validation'</span></code> if a validation split is used. <code class="docutils literal notranslate"><span class="pre">'fold_validation'</span></code> if Splitset has Folds. <code class="docutils literal notranslate"><span class="pre">None</span></code>
for an inference splitset.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>key_test</strong></p></td>
<td><p>CharField</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'test'</span></code> by default. <code class="docutils literal notranslate"><span class="pre">None</span></code> for an inference splitset.</p></td>
</tr>
<tr class="row-even"><td><p><strong>version</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>[TBD]</p></td>
</tr>
<tr class="row-odd"><td><p><strong>label</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>The Label, if any, that supervises this splitset</p></td>
</tr>
<tr class="row-even"><td><p><strong>predictor</strong></p></td>
<td><p>DeferredForeignKey</p></td>
<td><p>During inference, a new Splitset of samples to be predicted may attach to a Predictor. Samples dict will bear the key of the <code class="docutils literal notranslate"><span class="pre">Predictor.Splitset.count()</span></code> e.g.
<code class="docutils literal notranslate"><span class="pre">'infer_0'</span></code>.</p></td>
</tr>
</tbody>
</table>
<p>These are the fields of the Fold table</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>idx</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>Zero-based auto-incrementer that counts the Folds</p></td>
</tr>
<tr class="row-odd"><td><p><strong>samples</strong></p></td>
<td><p>JSONField</p></td>
<td><p>Contains the sample indices of the training folds and leftout validation fold, as well as any validation and test splits defined in the regular Splitset.samples
<code class="docutils literal notranslate"><span class="pre">dict().keys()==['folds_train_combined',</span> <span class="pre">'fold_validation',</span> <span class="pre">'validation',</span> <span class="pre">'test']</span></code></p></td>
</tr>
<tr class="row-even"><td><p><strong>fitted_labelcoder</strong></p></td>
<td><p>PickleField</p></td>
<td><p>When <code class="docutils literal notranslate"><span class="pre">LabelCoders</span></code>’s <code class="docutils literal notranslate"><span class="pre">fit</span></code> an sklearn preprocessor, the fit objects are saved here for downstream <code class="docutils literal notranslate"><span class="pre">inverse_transform</span></code>’ing</p></td>
</tr>
<tr class="row-odd"><td><p><strong>fitted_featurecoders</strong></p></td>
<td><p>PickleField</p></td>
<td><p>When <code class="docutils literal notranslate"><span class="pre">FeatureCoder</span></code>’s <code class="docutils literal notranslate"><span class="pre">fit</span></code> an sklearn preprocessor, the fit objects are saved here for downstream <code class="docutils literal notranslate"><span class="pre">inverse_transform</span></code>’ing</p></td>
</tr>
<tr class="row-even"><td><p><strong>splitset</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>The Splitset that this Fold belongs to</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
</section>
<section id="9.-Algorithm">
<h2>9. Algorithm<a class="headerlink" href="#9.-Algorithm" title="Permalink to this headline"></a></h2>
<p>Now that our data has been prepared, we transition to the 2nd half of the ORM where the focus is the logic that will be applied to that data.</p>
<p>The Algorithm contains all of the components needed to construct, train, and use our model.</p>
<p>Reference the <a class="reference external" href="../pages/gallery.html">tutorials</a> for examples of how Algorithms are defined.</p>
<hr class="docutils" />
<p><strong>PyTorch Fit</strong></p>
<p>Provides an abstraction that eliminates the boilerplate code normally required to train and evaluate a PyTorch model.</p>
<ul class="simple">
<li><p>Before training - it shuffles samples, batches samples, and then shuffles batches.</p></li>
<li><p>During training - it calculates batch loss, epoch loss, and epoch history metrics.</p></li>
<li><p>After training - it calculates metrics for each split.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">,</span> <span class="n">history</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">pytorch</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span>
    <span class="c1"># These arguments come directly from `fn_train`</span>
    <span class="n">model</span>
    <span class="p">,</span> <span class="n">loser</span>
    <span class="p">,</span> <span class="n">optimizer</span>

    <span class="p">,</span> <span class="n">train_features</span>
    <span class="p">,</span> <span class="n">train_label</span>
    <span class="p">,</span> <span class="n">eval_features</span>
    <span class="p">,</span> <span class="n">eval_label</span>

    <span class="c1"># These arguments are user-defined</span>
    <span class="p">,</span> <span class="n">epochs</span>
    <span class="p">,</span> <span class="n">batch_size</span>
    <span class="p">,</span> <span class="n">enforce_sameSize</span>
    <span class="p">,</span> <span class="n">allow_singleSample</span>
    <span class="p">,</span> <span class="n">metrics</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>User-Defined Arguments</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>epochs</strong></p></td>
<td><p>int</p></td>
<td><p>30</p></td>
<td><p>The number of times to loop over the features</p></td>
</tr>
<tr class="row-odd"><td><p><strong>batch_size</strong></p></td>
<td><p>int</p></td>
<td><p>5</p></td>
<td><p>Divides features and lables into chunks to be trained upon</p></td>
</tr>
<tr class="row-even"><td><p><strong>enforce_sameSize</strong></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, drops <code class="docutils literal notranslate"><span class="pre">len(batch!=batch_size)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>allow_singleSample</strong></p></td>
<td><p>bool</p></td>
<td><p>False</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">False</span></code>, drops <code class="docutils literal notranslate"><span class="pre">len(batch!=1)</span></code></p></td>
</tr>
<tr class="row-even"><td><p><strong>metrics</strong></p></td>
<td><p>list(torchmetrics.metric())</p></td>
<td><p>None</p></td>
<td><p>List of instantiated <code class="docutils literal notranslate"><span class="pre">torchmetrics</span></code> classes e.g. <code class="docutils literal notranslate"><span class="pre">Accuracy</span></code></p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p><strong>History Metrics</strong></p>
<p>The goal of the <code class="docutils literal notranslate"><span class="pre">Predictor.history</span></code> object is to record the training and evaluation metrics at the end of each epic so that they can be interpretted in the learning curve plots. Reference the <a class="reference external" href="evaluation.html">evaluation</a> section.</p>
<ul class="simple">
<li><p><em>Keras</em>: any <code class="docutils literal notranslate"><span class="pre">metrics=[]</span></code> specified are automatically added to the <code class="docutils literal notranslate"><span class="pre">History</span></code> callback object.</p></li>
<li><p><em>PyTorch</em>: if you use <code class="docutils literal notranslate"><span class="pre">fit</span></code> seen above, then you don’t need to worry about this. Users are responsible for calculating their own metrics (we recommend the <code class="docutils literal notranslate"><span class="pre">torchmetrics</span></code> package) and placing them into a <code class="docutils literal notranslate"><span class="pre">history</span></code> dictionary that mirrors the schema of the Keras history object. Reference the torch <a class="reference external" href="gallery/pytorch/multi_class.html">examples</a>.</p></li>
</ul>
<blockquote>
<div><p>The schema of the <code class="docutils literal notranslate"><span class="pre">history</span></code> dictionary is as follows: <code class="docutils literal notranslate"><span class="pre">dict(&lt;metric&gt;:ndarray,</span> <span class="pre">val_&lt;metric&gt;=ndarray)</span></code>. For example, if you wanted to record the history of the ‘loss’ and ‘accuracy’ metrics manually for PyTorch, you would construct it like so:</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">history</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">loss</span>           <span class="o">=</span> <span class="n">ndarray</span>
    <span class="p">,</span> <span class="n">val_loss</span>     <span class="o">=</span> <span class="n">ndarray</span>

    <span class="p">,</span> <span class="n">accuracy</span>     <span class="o">=</span> <span class="n">ndarray</span>
    <span class="p">,</span> <span class="n">val_accuracy</span> <span class="o">=</span> <span class="n">ndarray</span>
<span class="p">)</span>
</pre></div>
</div>
<hr class="docutils" />
<p><strong>TensorFlow Early Stopping</strong></p>
<p><em>Early stopping</em> isn’t just about efficiency in reducing the number of <code class="docutils literal notranslate"><span class="pre">epochs</span></code>. If you’ve specified 300 epochs, there’s a chance your model catches on to the underlying patterns early, say around 75-125 epochs. At this point, there’s also good chance what it learns in the remaining epochs will cause it to overfit on patterns that are specific to the training data, and thereby and lose it’s simplicity/ generalizability.</p>
<blockquote>
<div><p>The <code class="docutils literal notranslate"><span class="pre">metric=val_*</span></code> prefix refers to the evaluation samples.</p>
<p>Remember, regression does not have accuracy metrics.</p>
<p><code class="docutils literal notranslate"><span class="pre">TrainingCallback.MetricCutoff</span></code> is a custom class we wrote to make <em>early stopping</em> easier, so you won’t find information about it in the official Keras documentation.</p>
</div></blockquote>
<p>Placed within <code class="docutils literal notranslate"><span class="pre">fn_train</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiqc.utils.tensorflow</span> <span class="kn">import</span> <span class="n">TrainingCallback</span>

<span class="c1">#Define one or more metrics to monitor.</span>
<span class="n">metrics_cuttoffs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="nb">dict</span><span class="p">(</span><span class="n">metric</span><span class="o">=</span><span class="s1">&#39;accuracy&#39;</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="mf">0.96</span><span class="p">,</span> <span class="n">above_or_below</span><span class="o">=</span><span class="s1">&#39;above&#39;</span><span class="p">),</span>
    <span class="nb">dict</span><span class="p">(</span><span class="n">metric</span><span class="o">=</span><span class="s1">&#39;loss&#39;</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">above_or_below</span><span class="o">=</span><span class="s1">&#39;below&#39;</span><span class="p">)</span>
    <span class="nb">dict</span><span class="p">(</span><span class="n">metric</span><span class="o">=</span><span class="s1">&#39;val_accuracy&#39;</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="mf">0.96</span><span class="p">,</span> <span class="n">above_or_below</span><span class="o">=</span><span class="s1">&#39;above&#39;</span><span class="p">),</span>
    <span class="nb">dict</span><span class="p">(</span><span class="n">metric</span><span class="o">=</span><span class="s1">&#39;val_loss&#39;</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">above_or_below</span><span class="o">=</span><span class="s1">&#39;below&#39;</span><span class="p">)</span>
<span class="p">]</span>
<span class="n">cutoffs</span> <span class="o">=</span> <span class="n">TrainingCallback</span><span class="o">.</span><span class="n">MetricCutoff</span><span class="p">(</span><span class="n">metrics_cuttoffs</span><span class="p">)</span>

<span class="c1"># Pass it into keras callbacks</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span>
    <span class="c1"># other fit args</span>
    <span class="n">callbacks</span> <span class="o">=</span> <span class="p">[</span><span class="n">cutoffs</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<blockquote>
<div><p>Tip: try using a <code class="docutils literal notranslate"><span class="pre">val_accuracy</span></code> threshold by itself for best results</p>
</div></blockquote>
<hr class="docutils" />
<section id="9a.-Methods">
<h3>9a. Methods<a class="headerlink" href="#9a.-Methods" title="Permalink to this headline"></a></h3>
<p>Assemble an architecture consisting of components defined in functions.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">**hp</span></code> kwargs are common to every Algorithm function except <code class="docutils literal notranslate"><span class="pre">fn_predict</span></code>. They are used to systematically pass a dictionary of <em>hyperparameters</em> into these functions. See Hyperparameters.</p>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Algorithm.make()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Algorithm</span><span class="o">.</span><span class="n">make</span><span class="p">(</span>
    <span class="n">library</span>
    <span class="p">,</span> <span class="n">analysis_type</span>
    <span class="p">,</span> <span class="n">fn_build</span>
    <span class="p">,</span> <span class="n">fn_train</span>
    <span class="p">,</span> <span class="n">fn_predict</span>
    <span class="p">,</span> <span class="n">fn_lose</span>
    <span class="p">,</span> <span class="n">fn_optimize</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>library</strong></p></td>
<td><p>str</p></td>
<td><p>Required</p></td>
<td><p>‘keras’ or ‘pytorch’ depending on the type of model defined in <code class="docutils literal notranslate"><span class="pre">fn_build</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>analysis_type</strong></p></td>
<td><p>str</p></td>
<td><p>Required</p></td>
<td><p>‘classification_binary’, ‘classification_multi’, or ‘regression’. Unsupervised/ self-supervised falls under regression.
Used to determine which performance metrics are run. Errors if it is incompatible with the Label provided: e.g.
classification_binary is incompatible with an np.floating Label.column.</p></td>
</tr>
<tr class="row-even"><td><p><strong>fn_build</strong></p></td>
<td><p>func</p></td>
<td><p>Required</p></td>
<td><p>See below. Build the model architecture.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>fn_train</strong></p></td>
<td><p>func</p></td>
<td><p>Required</p></td>
<td><p>See below. Train the model.</p></td>
</tr>
<tr class="row-even"><td><p><strong>fn_predict</strong></p></td>
<td><p>func</p></td>
<td><p>None</p></td>
<td><p>See below. Run the model.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>fn_lose</strong></p></td>
<td><p>func</p></td>
<td><p>None</p></td>
<td><p>See below. Calculate loss.</p></td>
</tr>
<tr class="row-even"><td><p><strong>fn_optimize</strong></p></td>
<td><p>func</p></td>
<td><p>None</p></td>
<td><p>See below. Optimization strategy.</p></td>
</tr>
</tbody>
</table>
<p><strong>Required Functions</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fn_build</span><span class="p">(</span>
    <span class="n">features_shape</span><span class="p">:</span><span class="nb">tuple</span>
    <span class="p">,</span> <span class="n">label_shape</span><span class="p">:</span><span class="nb">tuple</span>
    <span class="p">,</span> <span class="o">**</span><span class="n">hp</span><span class="p">:</span><span class="nb">dict</span>
<span class="p">):</span>
    <span class="c1"># Define tf/torch model</span>
    <span class="k">return</span> <span class="n">model</span>
</pre></div>
</div>
<blockquote>
<div><p>The <code class="docutils literal notranslate"><span class="pre">*_shape</span></code> arguments contain the shape of a single sample, as opposed to a batch or entire dataset. <code class="docutils literal notranslate"><span class="pre">features_shape</span></code> is plural because it may contain the shape of multiple features. However, if only 1 feature was used then it will not be inside a list.</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fn_train</span><span class="p">(</span>
    <span class="n">model</span><span class="p">:</span><span class="nb">object</span>
    <span class="p">,</span> <span class="n">loser</span><span class="p">:</span><span class="nb">object</span>
    <span class="p">,</span> <span class="n">optimizer</span><span class="p">:</span><span class="nb">object</span>
    <span class="p">,</span> <span class="n">train_features</span><span class="p">:</span><span class="n">ndarray</span>
    <span class="p">,</span> <span class="n">train_label</span><span class="p">:</span><span class="n">ndarray</span>
    <span class="p">,</span> <span class="n">eval_features</span><span class="p">:</span><span class="n">ndarray</span>
    <span class="p">,</span> <span class="n">eval_label</span><span class="p">:</span><span class="n">ndarray</span>
    <span class="p">,</span> <span class="o">**</span><span class="n">hp</span><span class="p">:</span><span class="nb">dict</span>
<span class="p">):</span>
    <span class="c1"># Define training/ eval loop.</span>
    <span class="c1"># See `utils.pytorch.fit`</span>

    <span class="c1"># if tensorflow</span>
    <span class="k">return</span> <span class="n">model</span>
    <span class="c1"># if torch</span>
    <span class="c1"># See `utils.pytorch.fit` and history metrics below</span>
    <span class="k">return</span> <span class="n">history</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span> <span class="n">model</span>
</pre></div>
</div>
<p><strong>Optional Functions</strong></p>
<blockquote>
<div><p><em>Where are the defaults for optional functions defined?</em> See <a class="reference external" href="https://github.com/aiqc/AIQC/blob/main/aiqc/utils/tensorflow.py">utils.tensorflow</a> and <a class="reference external" href="https://github.com/aiqc/AIQC/blob/main/aiqc/utils/pytorch.py">utils.pytorch</a> for examples of loss, optimization, and prediction.</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fn_predict</span><span class="p">(</span><span class="n">model</span><span class="p">:</span><span class="nb">object</span><span class="p">,</span> <span class="n">features</span><span class="p">:</span><span class="n">ndarray</span><span class="p">):</span>
    <span class="c1">#if classify. predictions always ordinal, never OHE.</span>
    <span class="k">return</span> <span class="n">prediction</span><span class="p">,</span> <span class="n">probabilities</span> <span class="c1">#both as ndarray</span>

    <span class="c1">#if regression</span>
    <span class="k">return</span> <span class="n">prediction</span> <span class="c1">#ndarray</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fn_lose</span><span class="p">(</span><span class="o">**</span><span class="n">hp</span><span class="p">:</span><span class="nb">dict</span><span class="p">):</span>
    <span class="c1"># Define tf/torch loss function</span>
    <span class="k">return</span> <span class="n">loser</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fn_optimize</span><span class="p">(</span><span class="o">**</span><span class="n">hp</span><span class="p">:</span><span class="nb">dict</span><span class="p">):</span>
    <span class="c1"># Define tf/torch optimizer</span>
    <span class="k">return</span> <span class="n">optimizer</span>
</pre></div>
</div>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Algorithm.get_code()</span></code></p>
<p>Returns the strings of the Algorithm functions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">dict</span><span class="p">(</span>
    <span class="n">fn_build</span>      <span class="o">=</span> <span class="n">aiqc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">dill</span><span class="o">.</span><span class="n">reveal_code</span><span class="p">(</span><span class="n">Algorithm</span><span class="o">.</span><span class="n">fn_build</span><span class="p">)</span>
    <span class="p">,</span> <span class="n">fn_lose</span>     <span class="o">=</span> <span class="n">aiqc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">dill</span><span class="o">.</span><span class="n">reveal_code</span><span class="p">(</span><span class="n">Algorithm</span><span class="o">.</span><span class="n">fn_lose</span><span class="p">)</span>
    <span class="p">,</span> <span class="n">fn_optimize</span> <span class="o">=</span> <span class="n">aiqc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">dill</span><span class="o">.</span><span class="n">reveal_code</span><span class="p">(</span><span class="n">Algorithm</span><span class="o">.</span><span class="n">fn_optimize</span><span class="p">)</span>
    <span class="p">,</span> <span class="n">fn_train</span>    <span class="o">=</span> <span class="n">aiqc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">dill</span><span class="o">.</span><span class="n">reveal_code</span><span class="p">(</span><span class="n">Algorithm</span><span class="o">.</span><span class="n">fn_train</span><span class="p">)</span>
    <span class="p">,</span> <span class="n">fn_predict</span>  <span class="o">=</span> <span class="n">aiqc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">dill</span><span class="o">.</span><span class="n">reveal_code</span><span class="p">(</span><span class="n">Algorithm</span><span class="o">.</span><span class="n">fn_predict</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="9b.-Attributes">
<h3>9b. Attributes<a class="headerlink" href="#9b.-Attributes" title="Permalink to this headline"></a></h3>
<p>These are the fields of the Algorithm table</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 65%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>library</strong></p></td>
<td><p>CharField</p></td>
</tr>
<tr class="row-odd"><td><p><strong>analysis_type</strong></p></td>
<td><p>CharField</p></td>
</tr>
<tr class="row-even"><td><p><strong>fn_build</strong></p></td>
<td><p>BlobField</p></td>
</tr>
<tr class="row-odd"><td><p><strong>fn_lose</strong></p></td>
<td><p>BlobField</p></td>
</tr>
<tr class="row-even"><td><p><strong>fn_optimize</strong></p></td>
<td><p>BlobField</p></td>
</tr>
<tr class="row-odd"><td><p><strong>fn_train</strong></p></td>
<td><p>BlobField</p></td>
</tr>
<tr class="row-even"><td><p><strong>fn_predict</strong></p></td>
<td><p>BlobField</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>See #9.-Algorithm for descriptions</p>
</div></blockquote>
<hr class="docutils" />
</section>
</section>
<section id="10.-Hyperparameters">
<h2>10. Hyperparameters<a class="headerlink" href="#10.-Hyperparameters" title="Permalink to this headline"></a></h2>
<p>As mentioned in Algorithm, the <code class="docutils literal notranslate"><span class="pre">**hp</span></code> argument is used to systematically pass hyperparameters into the Algorithm functions.</p>
<p>For example, given the follow set of hyperparamets:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">hyperparameters</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">epoch_count</span>     <span class="o">=</span> <span class="p">[</span><span class="mi">30</span><span class="p">]</span>
    <span class="p">,</span> <span class="n">learning_rate</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.01</span><span class="p">]</span>
    <span class="p">,</span> <span class="n">neuron_count</span>  <span class="o">=</span> <span class="p">[</span><span class="mi">24</span><span class="p">,</span> <span class="mi">48</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>A grid search would produce the 2 unique <code class="docutils literal notranslate"><span class="pre">Hyperparamcombo</span></code>’s:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="nb">dict</span><span class="p">(</span>
        <span class="n">epoch_count</span>     <span class="o">=</span> <span class="mi">30</span>
        <span class="p">,</span> <span class="n">learning_rate</span> <span class="o">=</span> <span class="mf">0.01</span>
        <span class="p">,</span> <span class="n">neuron_count</span>  <span class="o">=</span> <span class="mi">24</span> <span class="c1">#&lt;-- varies</span>
    <span class="p">)</span>

    <span class="p">,</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">epoch_count</span>     <span class="o">=</span> <span class="mi">30</span>
        <span class="p">,</span> <span class="n">learning_rate</span> <span class="o">=</span> <span class="mf">0.01</span>
        <span class="p">,</span> <span class="n">neuron_count</span>  <span class="o">=</span> <span class="mi">48</span> <span class="c1">#&lt;-- varies</span>
    <span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
<p>We access the current value in our model functions like so: <code class="docutils literal notranslate"><span class="pre">hp['neuron_count']</span></code>.</p>
<hr class="docutils" />
<section id="10a.-Methods">
<h3>10a. Methods<a class="headerlink" href="#10a.-Methods" title="Permalink to this headline"></a></h3>
<p>└── <code class="docutils literal notranslate"><span class="pre">Hyperparamset.from_algorithm()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Hyperparamset</span><span class="o">.</span><span class="n">from_algorithm</span><span class="p">(</span>
    <span class="n">algorithm_id</span>
    <span class="p">,</span> <span class="n">hyperparameters</span>
    <span class="p">,</span> <span class="n">search_count</span>
    <span class="p">,</span> <span class="n">search_percent</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>algorithm_id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Algorithm.id</span></code> whose functions these hyperparameters will be used with</p></td>
</tr>
<tr class="row-odd"><td><p><strong>hyperparameters</strong></p></td>
<td><p>dict(str:list)</p></td>
<td><p>Required</p></td>
<td><p>See example in Hyperparameters. Must be JSON compatible.</p></td>
</tr>
<tr class="row-even"><td><p><strong>search_count</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>Randomly select <em>n</em> hyperparameter combinations to test. Must be greater than 1. No upper limit, it will test all
combinations if number of combinations is exceeded.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>search_percent</strong></p></td>
<td><p>float</p></td>
<td><p>None</p></td>
<td><p>Given all of the available hyperparameter combinations, search x%. Between <code class="docutils literal notranslate"><span class="pre">0.0:1.0</span></code>. Cannot be used if <code class="docutils literal notranslate"><span class="pre">search_count</span></code>
is used.</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>“Bayesian TPE (Tree-structured Parzen Estimator)” via <code class="docutils literal notranslate"><span class="pre">hyperopt</span></code> has been suggested as a future area to explore, but it does not exist right now.</p>
</div></blockquote>
<hr class="docutils" />
</section>
<section id="10b.-Attributes">
<h3>10b. Attributes<a class="headerlink" href="#10b.-Attributes" title="Permalink to this headline"></a></h3>
<p>These are the fields of the Hyperparamset table</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>hyperparameters</strong></p></td>
<td><p>JSONField</p></td>
<td><p>The original <code class="docutils literal notranslate"><span class="pre">dict(param=list)</span></code> of all possible values</p></td>
</tr>
<tr class="row-odd"><td><p><strong>search_count</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>The number of randomly selected combinations of hyperparameters</p></td>
</tr>
<tr class="row-even"><td><p><strong>search_percent</strong></p></td>
<td><p>FloatField</p></td>
<td><p>The percent of randomly selected combinations of hyperparameters</p></td>
</tr>
<tr class="row-odd"><td><p><strong>algorithm</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Algorithm.id</span></code> whose functions these hyperparameters will be used with</p></td>
</tr>
</tbody>
</table>
<p>These are the fields of the Hyperparamcombo table</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>idx</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>Zero-based counts the number of the number of hyperparamcombos</p></td>
</tr>
<tr class="row-odd"><td><p><strong>hyperparameters</strong></p></td>
<td><p>JSONField</p></td>
<td><p>The specific combination of hyperparameters that will be fed to the Algorithm functions</p></td>
</tr>
<tr class="row-even"><td><p><strong>hyperparamset</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>The Hyperparamset that this combination of hyperparameters was derived from</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
</section>
<section id="11.-Queue">
<h2>11. Queue<a class="headerlink" href="#11.-Queue" title="Permalink to this headline"></a></h2>
<p>The Queue is the central object of the “logic side” of the ORM. It ties together everything we need to run training <code class="docutils literal notranslate"><span class="pre">Job</span></code>’s for hyperparameter tuning. That’s why it is referred to as an Experiment in the High-Level API.</p>
<hr class="docutils" />
<section id="11a.-Methods">
<h3>11a. Methods<a class="headerlink" href="#11a.-Methods" title="Permalink to this headline"></a></h3>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Queue.from_algorithm()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Queue</span><span class="o">.</span><span class="n">from_algorithm</span><span class="p">(</span>
    <span class="n">algorithm_id</span>
    <span class="p">,</span> <span class="n">splitset_id</span>
    <span class="p">,</span> <span class="n">repeat_count</span>
    <span class="p">,</span> <span class="n">permute_count</span>
    <span class="p">,</span> <span class="n">hyperparamset_id</span>
    <span class="p">,</span> <span class="n">description</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>algorithm_id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Algorithm.id</span></code> whose functions will be used during training and evaluation</p></td>
</tr>
<tr class="row-odd"><td><p><strong>splitset_id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Splitset.id</span></code> whose samples will be used during training and evaluation</p></td>
</tr>
<tr class="row-even"><td><p><strong>repeat_count</strong></p></td>
<td><p>int</p></td>
<td><p>1</p></td>
<td><p>Each job will be repeat n times. Designed for use with random weight initialization (aka non-deterministic). This is why 1
<code class="docutils literal notranslate"><span class="pre">Job</span></code> has many <code class="docutils literal notranslate"><span class="pre">Predictors</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>permute_count</strong></p></td>
<td><p>int</p></td>
<td><p>3</p></td>
<td><p>Triggers a shuffled permutation of each training data column to determine which columns have the most impact on loss in
comparison baseline training loss: <code class="docutils literal notranslate"><span class="pre">[training</span> <span class="pre">loss</span> <span class="pre">-</span> <span class="pre">(median</span> <span class="pre">loss</span> <span class="pre">of</span> <span class="pre">&lt;n&gt;</span> <span class="pre">permutations)]</span></code>. The count determines how many
times the shuffled permutation is ran before taking the median loss. Permutation does <em>not</em> get run on
<code class="docutils literal notranslate"><span class="pre">Feature.dataset.typ=='image'</span></code>. Set this to 0 if you do not care about feature importance. Retroactive feature
importance is possible via <code class="docutils literal notranslate"><span class="pre">Prediction.calcFeatureImportance()</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>hyperparamset_id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Hyperparamset.id</span></code> whose samples will be used during training and evaluation. This needs to be specified because an
Algorithm can have many Hyperparamsets.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>description</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>What is unique about this experiment?</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Queue.run_jobs()</span></code></p>
<p>Jobs are simply ran on a loop on the main process.</p>
<p>Stop the queue with a keyboard interrupt e.g. <code class="docutils literal notranslate"><span class="pre">ctrl+Z/D/C</span></code> in Python shell or <code class="docutils literal notranslate"><span class="pre">i,i</span></code> in Jupyter. It is listening for interupts so it will usually stop gracefully. Even if it errors upon during interrupt, it’s not a problem. You can rerun the queue and it will resume on the same job it was running previously.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Queue</span><span class="o">.</span><span class="n">run_jobs</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 7%" />
<col style="width: 14%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>The identifier of the Queue of interest</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Queue.plot_performance()</span></code></p>
<p>Plots every model trained by the queue for comparison.</p>
<ul class="simple">
<li><p>X axis = loss</p></li>
<li><p>Y axis = score</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Queue</span><span class="o">.</span><span class="n">plot_performance</span><span class="p">(</span>
    <span class="nb">id</span>
    <span class="p">,</span> <span class="n">call_display</span>
    <span class="p">,</span> <span class="n">max_loss</span>
    <span class="p">,</span> <span class="n">min_score</span>
    <span class="p">,</span> <span class="n">score_type</span>
    <span class="p">,</span> <span class="n">height</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>The identifier of the Queue of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>call_display</strong></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, calls <code class="docutils literal notranslate"><span class="pre">display()</span></code> on plot. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, returns Plotly <code class="docutils literal notranslate"><span class="pre">figure</span></code> object.</p></td>
</tr>
<tr class="row-even"><td><p><strong>max_loss</strong></p></td>
<td><p>float</p></td>
<td><p>None</p></td>
<td><p>Models with any split with higher loss than this threshold will not be plotted.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>min_score</strong></p></td>
<td><p>typ</p></td>
<td><p>None</p></td>
<td><p>Models with any split with a lower score than this threshold will not be plotted.</p></td>
</tr>
<tr class="row-even"><td><p><strong>score_type</strong></p></td>
<td><p>typ</p></td>
<td><p>None</p></td>
<td><p>Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;accuracy&quot;</span></code> for classification analysis, and <code class="docutils literal notranslate"><span class="pre">&quot;r2&quot;</span></code> for regression analysis. See
<a class="reference external" href="https://github.com/aiqc/AIQC/blob/main/aiqc/utils/meter.py">aiqc.utils.meter</a> for available metrics.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>height</strong></p></td>
<td><p>typ</p></td>
<td><p>None</p></td>
<td><p>Default height is <code class="docutils literal notranslate"><span class="pre">560</span></code> but you can force it to be taller</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Queue.metrics_df()</span></code></p>
<p>Displays metrics for every split/fold of every model.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Queue</span><span class="o">.</span><span class="n">metrics_df</span><span class="p">(</span>
    <span class="nb">id</span>
    <span class="p">,</span> <span class="n">selected_metrics</span>
    <span class="p">,</span> <span class="n">sort_by</span>
    <span class="p">,</span> <span class="n">ascending</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>The identifier of the Queue of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ascending</strong></p></td>
<td><p>typ</p></td>
<td><p>False</p></td>
<td><p>Descending if False.</p></td>
</tr>
<tr class="row-even"><td><p><strong>selected_metrics</strong></p></td>
<td><p>list(str)</p></td>
<td><p>None</p></td>
<td><p>If you get overwhelmed by the variety of metrics returned, then you can include the ones you want selectively by name.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>sort_by</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>You can sort the dataframe by any column name.</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Queue.metricsAggregate_df()</span></code></p>
<p>Aggregate statistics about every metric of every model trained in the Queue – displays the average, median, standard deviation, minimum, and maximum across all splits/folds.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Queue</span><span class="o">.</span><span class="n">metricsAggregate_df</span><span class="p">(</span>
    <span class="nb">id</span>
    <span class="p">,</span> <span class="n">ascending</span>        <span class="o">=</span> <span class="kc">False</span>
    <span class="p">,</span> <span class="n">selected_metrics</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">,</span> <span class="n">selected_stats</span>   <span class="o">=</span> <span class="kc">None</span>
    <span class="p">,</span> <span class="n">sort_by</span>          <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>The identifier of the Queue of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ascending</strong></p></td>
<td><p>typ</p></td>
<td><p>False</p></td>
<td><p>Descending if False.</p></td>
</tr>
<tr class="row-even"><td><p><strong>selected_metrics</strong></p></td>
<td><p>list(str)</p></td>
<td><p>None</p></td>
<td><p>If you get overwhelmed by the variety of metrics returned, then you can include the ones you want selectively by name.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>sort_by</strong></p></td>
<td><p>str</p></td>
<td><p>None</p></td>
<td><p>You can sort the dataframe by any column name.</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
<section id="11b.-Attributes">
<h3>11b. Attributes<a class="headerlink" href="#11b.-Attributes" title="Permalink to this headline"></a></h3>
<p>These are the fields of the Queue table</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>repeat_count</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>The number of times to repeat each Job.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>total_runs</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>The total number of models to be trained as a result of this queue being created.</p></td>
</tr>
<tr class="row-even"><td><p><strong>permute_count</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>Number of permutations to run on each column before taking the median impact on loss. 0 means permutation was skipped.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>runs_completed</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>Counts the runs that have actually finished</p></td>
</tr>
<tr class="row-even"><td><p><strong>algorithm</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>The model functions to use during training and evaluation</p></td>
</tr>
<tr class="row-odd"><td><p><strong>splitset</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>The pipeline of samples to feed to the models during training and evaluation</p></td>
</tr>
<tr class="row-even"><td><p><strong>hyperparamset</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>Contains all of the hyperparameters to be used for the Jobs</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
</section>
<section id="12.-Job">
<h2>12. Job<a class="headerlink" href="#12.-Job" title="Permalink to this headline"></a></h2>
<p>The Queue spawns <code class="docutils literal notranslate"><span class="pre">Job</span></code>’s. A Job is like a spec/ manifest for training a model. It may be repeated.</p>
<p><code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">jobs</span> <span class="pre">=</span> <span class="pre">Hyperamset.hyperamcombo.count()</span> <span class="pre">*</span> <span class="pre">Queue.repeat_count</span> <span class="pre">*</span> <span class="pre">splitset.folds.count()</span></code></p>
<hr class="docutils" />
<section id="12a.-Methods">
<h3>12a. Methods<a class="headerlink" href="#12a.-Methods" title="Permalink to this headline"></a></h3>
<p>There are no noteworthy, user-facing methods for the Job class</p>
<hr class="docutils" />
</section>
<section id="12b.-Attributes">
<h3>12b. Attributes<a class="headerlink" href="#12b.-Attributes" title="Permalink to this headline"></a></h3>
<p>These are the fields of the Job table</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>repeat_count</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>The number of times this Job is to be repeated</p></td>
</tr>
<tr class="row-odd"><td><p><strong>queue</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>The Queue this Job was created by</p></td>
</tr>
<tr class="row-even"><td><p><strong>hyperparamcombo</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>The parameters this Job uses</p></td>
</tr>
<tr class="row-odd"><td><p><strong>fold</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>The cross-validation samples that this Job uses</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
</section>
<section id="13.-Predictor">
<h2>13. Predictor<a class="headerlink" href="#13.-Predictor" title="Permalink to this headline"></a></h2>
<p>As the Jobs finish, they save the <code class="docutils literal notranslate"><span class="pre">model</span></code> and <code class="docutils literal notranslate"><span class="pre">history</span></code> metrics within a <code class="docutils literal notranslate"><span class="pre">Predictor</span></code> object.</p>
<hr class="docutils" />
<section id="13a.-Methods">
<h3>13a. Methods<a class="headerlink" href="#13a.-Methods" title="Permalink to this headline"></a></h3>
<p>└── <code class="docutils literal notranslate"><span class="pre">Predictor.get_model()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">predictor</span><span class="o">.</span><span class="n">get_model</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
</pre></div>
</div>
<p>Handles fetching and initializing the model (and PyTorch optimizer) from <code class="docutils literal notranslate"><span class="pre">Predictor.model_file</span></code> and <code class="docutils literal notranslate"><span class="pre">Predictor.input_shapes</span></code></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 6%" />
<col style="width: 11%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The identifier of the Predictor of interest</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Predictor.get_hyperparameters()</span></code></p>
<p>This is a shortcut to fetch the hyperparameters used to train this specific model. <code class="docutils literal notranslate"><span class="pre">as_pandas</span></code> toggles between <code class="docutils literal notranslate"><span class="pre">dict()</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Predictor</span><span class="o">.</span><span class="n">get_hyperparameters</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">as_pandas</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The identifier of the Predictor of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>as_pandas</strong></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, returns a DataFrame. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, returns a <code class="docutils literal notranslate"><span class="pre">list(dict(param_name=[values]))</span></code></p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Predictor.plot_learning_curve()</span></code></p>
<p>A learning curve will be generated for each train-evaluation pair of metrics in the Predictor.history dictionary</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Predictor</span><span class="o">.</span><span class="n">plot_learning_curve</span><span class="p">(</span>
    <span class="nb">id</span>
    <span class="p">,</span> <span class="n">skip_head</span>
    <span class="p">,</span> <span class="n">call_display</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The identifier of the Predictor of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>skip_head</strong></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>Skips displaying the first 15% of epochs. Loss values in the first few epochs can often be extremely high before they
plummet and become more gradual. This really stretches out the graph and makes it hard to see if the evaluation set is
diverging or not.</p></td>
</tr>
<tr class="row-even"><td><p><strong>call_display</strong></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, calls <code class="docutils literal notranslate"><span class="pre">display()</span></code> on plot. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, returns Plotly <code class="docutils literal notranslate"><span class="pre">figure</span></code> object(s).</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
<section id="13b.-Attributes">
<h3>13b. Attributes<a class="headerlink" href="#13b.-Attributes" title="Permalink to this headline"></a></h3>
<p>These are the fields of the Predictor table</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>repeat_index</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>Counts how many predictors have been trained using a Job spec</p></td>
</tr>
<tr class="row-odd"><td><p><strong>time_started</strong></p></td>
<td><p>DateTimeField</p></td>
<td><p>When the Job started</p></td>
</tr>
<tr class="row-even"><td><p><strong>time_succeeded</strong></p></td>
<td><p>DateTimeField</p></td>
<td><p>When the Job finished</p></td>
</tr>
<tr class="row-odd"><td><p><strong>time_duration</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>Total time in seconds it took to complete the Job</p></td>
</tr>
<tr class="row-even"><td><p><strong>model_file</strong></p></td>
<td><p>BlobField</p></td>
<td><p>Contains a dilled (advanced Pickle) of the trained model. See <code class="docutils literal notranslate"><span class="pre">Predictor.get_model()</span></code> for exporting.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>features_shapes</strong></p></td>
<td><p>PickleField</p></td>
<td><p>tuple or list of tuples containing the np.shape(s) of feature(s)</p></td>
</tr>
<tr class="row-even"><td><p><strong>label_shape</strong></p></td>
<td><p>PickleField</p></td>
<td><p>tuple containing np.shape of a single sample’s label</p></td>
</tr>
<tr class="row-odd"><td><p><strong>history</strong></p></td>
<td><p>JSONField</p></td>
<td><p>Contains the training history loss/metrics</p></td>
</tr>
<tr class="row-even"><td><p><strong>is_starred</strong></p></td>
<td><p>BooleanField</p></td>
<td><p>Flag denoting if this model is of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>job</strong></p></td>
<td><p>ForeignKeyField</p></td>
<td><p>The Job that trained this Predictor</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
</section>
<section id="14.-Prediction">
<h2>14. Prediction<a class="headerlink" href="#14.-Prediction" title="Permalink to this headline"></a></h2>
<p>When data is fed through a Predictor, you get a <code class="docutils literal notranslate"><span class="pre">Prediction</span></code>. During training, Predictions are automatically generated for every split/fold in the <code class="docutils literal notranslate"><span class="pre">Queue.splitset</span></code>.</p>
<hr class="docutils" />
<section id="14a.-Methods">
<h3>14a. Methods<a class="headerlink" href="#14a.-Methods" title="Permalink to this headline"></a></h3>
<p>└── <code class="docutils literal notranslate"><span class="pre">Prediction.calc_featureImportance()</span></code></p>
<p>This method is provided for conducting feature importance after training. It was decoupled from training for the following reasons:</p>
<ul class="simple">
<li><p>Permutation is computationally expensive, especially for many-columned datasets.</p></li>
<li><p>We don’t care about the feature importance of our best models.</p></li>
</ul>
<p>What data is used when calculating feature importance? All splits/folds are concatenated back into a single dataset. This assumes that all splits/folds are relatively equally balanced with respect to their label values. For example, if you have unbalanced multi-labels (55:35:10 distribution of classes) then a given feature’s importance may be biased based on how well it predicts the larger class. For binary classification scenarios, this should not matter as much since predicting one class also
helps in predicting the opposite class.</p>
<p>Upon completion it will update the <code class="docutils literal notranslate"><span class="pre">Prediction.feature_importance</span></code> and <code class="docutils literal notranslate"><span class="pre">Prediction.permute_count</span></code> attributes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Prediction</span><span class="o">.</span><span class="n">calc_featureImportance</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">permute_count</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The identifier of the Prediction of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>permute_count</strong></p></td>
<td><p>int</p></td>
<td><p>Required</p></td>
<td><p>The count determines how many times the shuffled permutation is ran before taking the median loss.
<code class="docutils literal notranslate"><span class="pre">[training</span> <span class="pre">loss</span> <span class="pre">-</span> <span class="pre">(median</span> <span class="pre">loss</span> <span class="pre">of</span> <span class="pre">&lt;n&gt;</span> <span class="pre">permutations)]</span></code> Permutation <em>skips</em> <code class="docutils literal notranslate"><span class="pre">Feature.dataset.typ=='image'</span></code>.</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Prediction.importance_df()</span></code></p>
<p>Returns a dataframe of feature columns ranked by their median importance</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Prediction</span><span class="o">.</span><span class="n">importance_df</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">top_n</span><span class="p">,</span> <span class="n">feature_id</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The identifier of the Prediction of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>top_n</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The number of columns to return</p></td>
</tr>
<tr class="row-even"><td><p><strong>feature_id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>Limit returned columns to a specific feature identifier</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Prediction.plot_feature_importance()</span></code></p>
<p>Plots <code class="docutils literal notranslate"><span class="pre">prediction.feature_importance</span></code> if <code class="docutils literal notranslate"><span class="pre">Queue.permute_count&gt;0</span></code> or <code class="docutils literal notranslate"><span class="pre">Prediction.calc_featureImportance()</span></code> was ran after the fact.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Prediction</span><span class="o">.</span><span class="n">plot_feature_importance</span><span class="p">(</span>
    <span class="nb">id</span>
    <span class="p">,</span> <span class="n">call_display</span>
    <span class="p">,</span> <span class="n">top_n</span>
    <span class="p">,</span> <span class="n">height</span>
    <span class="p">,</span> <span class="n">margin_left</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The identifier of the Prediction of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>call_display</strong></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, calls <code class="docutils literal notranslate"><span class="pre">display()</span></code> on plot. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, returns Plotly <code class="docutils literal notranslate"><span class="pre">figure</span></code> object.</p></td>
</tr>
<tr class="row-even"><td><p><strong>top_n</strong></p></td>
<td><p>int</p></td>
<td><p>10</p></td>
<td><p>The number of features to display. If greater than the actual number of features, it just returns all features.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>boxpoints</strong></p></td>
<td><p>object</p></td>
<td><p>False</p></td>
<td><p>Determines how whiskers, outliers, and points are shown. Options are: <code class="docutils literal notranslate"><span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">'all'</span></code>, <code class="docutils literal notranslate"><span class="pre">'suspectedoutliers'</span></code>, and
<code class="docutils literal notranslate"><span class="pre">'outliers'</span></code>. Reference <a class="reference external" href="https://plotly.com/python/box-plots/">Plotly Box Plots</a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>height</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">None</span></code>, dynamically makes the plot taller to fit all of the columns</p></td>
</tr>
<tr class="row-odd"><td><p><strong>margin_left</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">None</span></code>, dynamically makes the y axis margin wider the longest column name</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Prediction.plot_roc_curve()</span></code></p>
<p>Receiver operating curve (ROC) for classification metrics.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Prediction</span><span class="o">.</span><span class="n">plot_roc_curve</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">call_display</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The identifier of the Prediction of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>call_display</strong></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, calls <code class="docutils literal notranslate"><span class="pre">display()</span></code> on plot. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, returns Plotly <code class="docutils literal notranslate"><span class="pre">figure</span></code> object.</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Prediction.plot_precision_recall()</span></code></p>
<p>Precision/recall curve for classification metrics.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Prediction</span><span class="o">.</span><span class="n">plot_precision_recall</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">call_display</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The identifier of the Prediction of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>call_display</strong></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, calls <code class="docutils literal notranslate"><span class="pre">display()</span></code> on plot. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, returns Plotly <code class="docutils literal notranslate"><span class="pre">figure</span></code> object.</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Prediction.plot_confusion_matrix()</span></code></p>
<p>Confusion matrices for classification metrics.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Prediction</span><span class="o">.</span><span class="n">plot_confusion_matrix</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">call_display</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The identifier of the Prediction of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>call_display</strong></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, calls <code class="docutils literal notranslate"><span class="pre">display()</span></code> on plot. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, returns Plotly <code class="docutils literal notranslate"><span class="pre">figure</span></code> object(s).</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>└── <code class="docutils literal notranslate"><span class="pre">Prediction.plot_confidence()</span></code></p>
<p>Plot the binary/multi-label classification probabilities for a single sample.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Prediction</span><span class="o">.</span><span class="n">plot_confidence</span><span class="p">(</span>
    <span class="nb">id</span><span class="p">,</span>
    <span class="p">,</span> <span class="n">prediction_index</span>
    <span class="p">,</span> <span class="n">height</span>
    <span class="p">,</span> <span class="n">call_display</span>
    <span class="p">,</span> <span class="n">split_name</span>
<span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>id</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The identifier of the Prediction of interest</p></td>
</tr>
<tr class="row-odd"><td><p><strong>prediction_index</strong></p></td>
<td><p>int</p></td>
<td><p>0</p></td>
<td><p>The index of the sample of interest</p></td>
</tr>
<tr class="row-even"><td><p><strong>height</strong></p></td>
<td><p>int</p></td>
<td><p>175</p></td>
<td><p>Force the height of the chart.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>call_display</strong></p></td>
<td><p>bool</p></td>
<td><p>True</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, returns a DataFrame. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, returns a <code class="docutils literal notranslate"><span class="pre">list(dict(param_name=[values]))</span></code></p></td>
</tr>
<tr class="row-even"><td><p><strong>split_name</strong></p></td>
<td><p>int</p></td>
<td><p>None</p></td>
<td><p>The identifier of the Prediction of interest</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
<section id="14b.-Attributes">
<h3>14b. Attributes<a class="headerlink" href="#14b.-Attributes" title="Permalink to this headline"></a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>predictions</strong></p></td>
<td><p>PickleField</p></td>
<td><p>Decoded predictions ndarray for per split/ fold/ inference</p></td>
</tr>
<tr class="row-odd"><td><p><strong>permute_count</strong></p></td>
<td><p>IntegerField</p></td>
<td><p>The number of times this feature importance permuted each column</p></td>
</tr>
<tr class="row-even"><td><p><strong>feature_importance</strong></p></td>
<td><p>JSONField</p></td>
<td><p>Importance of each column. Only calculated for training split/fold. Schema: <code class="docutils literal notranslate"><span class="pre">dict(str(feature.id)=dict(median=float,loss_impacts=list(float)))</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>probabilities</strong></p></td>
<td><p>PickleField</p></td>
<td><p>Prediction probabilities per split/ fold. <code class="docutils literal notranslate"><span class="pre">None</span></code> for regression. Schema: <code class="docutils literal notranslate"><span class="pre">dict(split=ndarray)</span></code></p></td>
</tr>
<tr class="row-even"><td><p><strong>metrics</strong></p></td>
<td><p>PickleField</p></td>
<td><p>Statistics for each split/fold that vary based on the analysis_type.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>metrics_aggregate</strong></p></td>
<td><p>PickleField</p></td>
<td><p>Contains the average, median, standard deviation, minimum, and maximum for each statistic across all splits/folds.</p></td>
</tr>
<tr class="row-even"><td><p><strong>plot_data</strong></p></td>
<td><p>PickleField</p></td>
<td><p>Metrics reformatted for plot functions.</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</section>
</section>
<section id="Evaluation">
<h2>Evaluation<a class="headerlink" href="#Evaluation" title="Permalink to this headline"></a></h2>
<p>To see the visualization of performance metrics of <code class="docutils literal notranslate"><span class="pre">Queue</span></code>, <code class="docutils literal notranslate"><span class="pre">Predictor</span></code> and <code class="docutils literal notranslate"><span class="pre">Prediction</span></code> in action – reference the <a class="reference external" href="evaluation.html">Evaluation</a> documentation.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>